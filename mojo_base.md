Mojoæ˜¯ç¬¬ä¸€ä¸ªä¸“é—¨ä¸ºMLIRè®¾è®¡çš„è¯­è¨€ï¼Œå®ƒä¸ä»…è¦æˆä¸º**Pythonçš„è¶…é›†**ï¼Œè€Œä¸”æ˜¯ä¸€é—¨**è¿½æ±‚æè‡´æ€§èƒ½çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼ˆFocused on performance & system programming)**ã€‚ Mojoå¯»æ±‚å°½å¯èƒ½é«˜çš„æ€§èƒ½ï¼Œä»¥æ¶ˆé™¤ä¸¤ä¸ªä¸–ç•Œçš„é—®é¢˜ï¼ˆPythonä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¾ˆå¤šæ€§èƒ½æ•æ„Ÿçš„åº“åªèƒ½ä½¿ç”¨Cæˆ–C++æ¥ç¼–å†™ï¼‰ï¼›Mojoç›´æ¥ç¼–è¯‘ä¸ºåŸç”Ÿæœºå™¨ä»£ç ï¼Œæ²¡æœ‰ç”¨Cä½œä¸ºä¸­é—´ä»£ç ã€‚

- Pythonæ˜¯åŠ¨æ€ã€å¼ºç±»å‹çš„**è§£é‡Šå‹è¯­è¨€**ã€‚å†…å­˜ç®¡ç†æœºåˆ¶æ˜¯ï¼šå¼•å…¥è®¡æ•°ã€**åƒåœ¾å›æ”¶**ã€å†…å­˜æ± æœºåˆ¶ã€‚
- **Mojo**æ˜¯é™æ€ã€å¼ºç±»å‹ã€**å†…å­˜å®‰å…¨memory safety**çš„**ç¼–è¯‘å‹**è¯­è¨€ã€‚ å®ƒæ²¡æœ‰ä½¿ç”¨å¼•ç”¨è®¡æ•°å’Œåƒåœ¾æ”¶é›†å™¨æ¥ç®¡ç†å†…å­˜ã€‚è€Œæ˜¯åƒRustä¸€æ ·ï¼Œé€šè¿‡**å®šä¹‰`å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ`ï¼Œä½¿ç”¨`å€Ÿç”¨æ£€æŸ¥å™¨`æ¥`è‡ªåŠ¨ç®¡ç†å†…å­˜`**ã€‚

ä¸ºä»€ä¹ˆMojoæˆä¸ºPythonçš„è¶…é›†å¯ä»¥å®ç°ï¼Ÿ Chris Lattner æ˜¯LLVMã€Clangã€Swiftã€MLIRçš„ä½œè€…ã€‚
- Clangç¼–è¯‘å™¨ï¼ˆCã€C++ã€Objective-Cã€CUDAã€OpenCLç­‰ç¼–è¯‘å™¨ï¼‰æ˜¯GCCã€MSVCå’Œå…¶ä»–ç°æœ‰ç¼–è¯‘å™¨çš„â€œå…¼å®¹æ›¿ä»£å“â€ã€‚Clangç¼–è¯‘å™¨è¦å…¼å®¹è¿™äº›çš„å¤æ‚æ€§æ¯”å®ç°Mojoå…¼å®¹Pythonå¤§ä¸€ä¸ªæ•°é‡çº§ã€‚

- Swiftæ‹¥æŠ±äº†Objective-Cè¿è¡Œæ—¶å’Œè¯­è¨€ç”Ÿæ€ç³»ç»Ÿï¼Œ é€šè¿‡Swiftï¼ŒChris Lattner å…·å¤‡ä¿æŒâ€œè¿è¡Œæ—¶å…¼å®¹â€ä»¥åŠå¦‚ä½•ä¸é—ç•™è¿è¡Œæ—¶åˆä½œçš„ä¸°å¯Œç»éªŒã€‚

æœŸå¾…æœ‰è¿™ä¹ˆä¸€å¤©ï¼šCPythonå›¢é˜Ÿæœ€ç»ˆç”¨Mojoè¯­è¨€è€Œä¸æ˜¯Cè¯­è¨€å®ç°è§£é‡Šå™¨ ğŸ”¥ ã€‚ ï¼ˆPythonå®˜æ–¹çš„è§£é‡Šå™¨å®ç°ç”¨Cè¯­è¨€å®ç°çš„ï¼Œæ‰€ä»¥ä¹Ÿå«**CPython**ï¼Œå®ƒæ˜¯æœ€å¹¿æ³›ä½¿ç”¨çš„Pythonè§£é‡Šå™¨ï¼‰

> MLIRå¤šçº§ä¸­é—´è¡¨ç¤ºï¼ˆMulti-Level Intermediate Representation ï¼‰æ˜¯ç¼–ç¨‹è¯­è¨€(å¦‚mojoï¼‰æˆ–è€…åº“ï¼ˆå¦‚ TensorFlowï¼‰å’Œæœºå™¨ä»£ç ä¹‹é—´çš„ä¸­é—´è¯­è¨€ï¼Œå…è®¸ä¸åŒè¯­è¨€çš„ä¸åŒç¼–è¯‘å™¨å †æ ˆä¹‹é—´çš„ä»£ç é‡ç”¨ä»¥åŠå…¶ä»–æ€§èƒ½å’Œå¯ç”¨æ€§ä¼˜åŠ¿ã€‚ 

# Python å’Œ Mojo çš„åŒºåˆ«
- åœ¨Pythonä¸­ï¼Œå¼•ç”¨æ— å¤„ä¸åœ¨ï¼ˆåç§°å°±æ˜¯å¼•ç”¨ï¼Œåˆ—è¡¨/å…ƒç»„ä¸­çš„å…ƒç´ éƒ½æ˜¯å¼•ç”¨ï¼Œå‡½æ•°å‚æ•°ä½œä¸ºå¼•ç”¨ä¼ é€’ï¼‰
<br>
- **Pythonå¯¹è±¡çš„å¯ä¸å¯å˜`åœ¨äºå®ƒä»¬çš„ç±»å‹`**ï¼šliståˆ—è¡¨å¯å˜ï¼Œ å…ƒç»„tupleä¸å¯å˜ã€‚
```python
tup1 = ('physics', 'chemistry', 1997, 2000)  # å…ƒç»„ä¸å¯å˜
list1 = [3,7,'Mar','Feb','Jan']              # åˆ—è¡¨å¯å˜
```
- ç±»ä¼¼äºå…¶ä»–é™æ€è¯­è¨€ï¼Œ**Mojoå¯¹è±¡çš„å¯ä¸å¯å˜ä¸åœ¨äºç±»å‹ï¼Œè€Œåœ¨äºæ˜¯ç”¨`let`è¿˜æ˜¯`var`æ¥å£°æ˜çš„**ã€‚ä¾‹å¦‚ï¼Œå³ä½¿Mojo çš„å­—ç¬¦ä¸²æœ¬è´¨ä¸Šæ˜¯å¯æ”¹åŠ¨çš„, ä¹Ÿå¯ä»¥ç”¨åƒ `let s = String("Mojo")` è¿™æ ·çš„è¯­æ³•å£°æ˜ä¸€ä¸ªä¸å¯æ”¹åŠ¨çš„å­—ç¬¦ä¸²ã€‚

# `alias` å®šä¹‰`ç¼–è¯‘æ—¶å¸¸é‡`
```mojo
alias PI = 3.141592653589793
alias TAU = 2 * PI
```




# å†…å­˜ç®¡ç†
æ‰€æœ‰ç°ä»£ç¼–ç¨‹è¯­è¨€éƒ½å°†æ•°æ®å­˜å‚¨åœ¨ä¸¤ä¸ªåœ°æ–¹ä¹‹ä¸€ï¼š`call stackè°ƒç”¨æ ˆ`å’Œ `heapå †`ï¼Œæœ‰æ—¶ä¹Ÿç”¨`CPU registerså¯„å­˜å™¨`å­˜å–æ•°æ®ã€‚ç„¶è€Œï¼Œæ¯ç§è¯­è¨€è¯»å–å’Œå†™å…¥æ•°æ®çš„æ–¹å¼ç•¥æœ‰ä¸åŒ-æœ‰æ—¶éå¸¸ä¸åŒ

### stackæ ˆ & å­˜å‚¨ç©ºé—´å›ºå®šçš„å±€éƒ¨å˜é‡
ä¸€èˆ¬æ¥è¯´ï¼Œæ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½ä»¥ç›¸åŒçš„æ–¹å¼ä½¿ç”¨`call stackè°ƒç”¨æ ˆ`ï¼šå½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨åœ¨æ ˆä¸Šåˆ†é…ä¸€ä¸ªå†…å­˜å—ï¼Œè¯¥å†…å­˜å—çš„å¤§å°æ­£å¥½å¯ä»¥å­˜å‚¨`æ‰§è¡Œé€»è¾‘` å’Œæ‰€æœ‰ **`å­˜å‚¨ç©ºé—´å›ºå®šçš„å±€éƒ¨å˜é‡(fixed-size local values)`**ã€‚å½“å¦ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒçš„æ•°æ®åŒæ ·è¢«æ·»åŠ åˆ°æ ˆçš„é¡¶éƒ¨ã€‚å½“ä¸€ä¸ªå‡½æ•°å®Œæˆæ—¶ï¼Œå®ƒåœ¨æ ˆä¸­çš„æ‰€æœ‰æ•°æ®éƒ½å°†è¢«é”€æ¯ï¼Œä»¥ä¾¿å†…å­˜å¯ç”¨äºå…¶ä»–ä»£ç ã€‚


### heapå † & åŠ¨æ€æ”¹å˜å­˜å‚¨ç©ºé—´çš„å€¼
è¯·æ³¨æ„ï¼Œæˆ‘ä»¬è¯´åªæœ‰ **å­˜å‚¨ç©ºé—´å›ºå®šçš„å±€éƒ¨å˜é‡(fixed-size local values)** æ‰ä¼šå­˜å‚¨åœ¨æ ˆstackä¸­ã€‚ä»»ä½•åœ¨è¿è¡Œæ—¶å¯ä»¥ **`åŠ¨æ€æ”¹å˜å­˜å‚¨ç©ºé—´çš„å€¼(dynamically-sized values)`** ä¼šå­˜å‚¨åœ¨å †heapä¸­ï¼Œå †æ˜¯ä¸€ä¸ªæ›´å¤§çš„å†…å­˜åŒºåŸŸï¼Œå…è®¸åœ¨è¿è¡Œæ—¶è¿›è¡ŒåŠ¨æ€å†…å­˜è®¿é—®ã€‚

æ­¤å¤–ï¼Œéœ€è¦åœ¨å‡½æ•°çš„ç”Ÿå­˜æœŸä¹‹å¤–ç”Ÿå­˜çš„å€¼ï¼Œä¹Ÿå­˜å‚¨åœ¨heapå †ä¸­ã€‚å³ä½¿åˆ›å»ºå®ƒçš„å‡½æ•°è¿è¡Œç»“æŸï¼Œä»å †æ ˆä¸­ç§»é™¤ä¹‹åï¼Œè¿™äº›headå †ä¸Šåˆ†é…çš„å€¼ï¼Œä¹Ÿè¿˜åœ¨ï¼Œè¿™æ˜¯å‘ç”Ÿå¤§å¤šæ•°å†…å­˜é”™è¯¯çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯ä¸åŒç¼–ç¨‹è¯­è¨€ä¹‹é—´å†…å­˜ç®¡ç†ç­–ç•¥å·®å¼‚æœ€å¤§çš„åœ°æ–¹ã€‚å› ä¸ºå†…å­˜æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥ç¨‹åºå°½å¿«ä»heapå †ä¸­åˆ é™¤æœªä½¿ç”¨çš„æ•°æ®ï¼ˆâ€œé‡Šæ”¾â€å†…å­˜ï¼‰æ˜¯å¾ˆé‡è¦çš„ã€‚

### åƒåœ¾æ”¶é›†å™¨ GC & æ‰‹åŠ¨å†…å­˜ç®¡ç†
ä¸€äº›ç¼–ç¨‹è¯­è¨€è¯•å›¾é€šè¿‡ä½¿ç”¨**åƒåœ¾æ”¶é›†å™¨**æ¥éšè—å†…å­˜ç®¡ç†çš„å¤æ‚æ€§ï¼Œ**è¯¥è¿›ç¨‹è·Ÿè¸ªæ‰€æœ‰å†…å­˜ä½¿ç”¨æƒ…å†µå¹¶å®šæœŸé‡Šæ”¾æœªä½¿ç”¨çš„å †å†…å­˜**ï¼ˆä¹Ÿç§°ä¸ºè‡ªåŠ¨å†…å­˜ç®¡ç†ï¼‰ã€‚å¥½å¤„æ˜¯ï¼Œå®ƒå‡è½»äº†å¼€å‘äººå‘˜æ‰‹åŠ¨å†…å­˜ç®¡ç†çš„è´Ÿæ‹…ï¼Œå¯ä»¥é¿å…é”™è¯¯ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œ**GCä¼šå½±å“æ€§èƒ½**ï¼Œå› ä¸ºåƒåœ¾æ”¶é›†å™¨ä¼šä¸­æ–­ç¨‹åºçš„æ‰§è¡Œï¼Œé€ æˆç¨‹åºå¡é¡¿ï¼Œå¹¶ä¸”å¯èƒ½ä¸ä¼šå¾ˆå¿«å›æ”¶å†…å­˜ï¼Œå¯¼è‡´å†…å­˜ç”¨é‡å¢åŠ ã€‚

å…¶ä»–è¯­è¨€è¦æ±‚æ‚¨**æ‰‹åŠ¨é‡Šæ”¾åœ¨å †ä¸Šåˆ†é…çš„æ•°æ®**ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å¾ˆ**å®¹æ˜“å‡ºé”™**ï¼Œç‰¹åˆ«æ˜¯å½“ç¨‹åºçš„å¤šä¸ªéƒ¨åˆ†éœ€è¦è®¿é—®åŒä¸€å—å†…å­˜æ—¶ï¼Œå¾ˆéš¾çŸ¥é“ç¨‹åºçš„å“ªä¸ªéƒ¨åˆ†æ‹¥æœ‰è¯¥æ•°æ®ï¼Œå¹¶è´Ÿè´£é‡Šæ”¾æ•°æ®ã€‚ç¨‹åºå‘˜å¯èƒ½ä¼šåœ¨ç¨‹åºå®Œæˆä¹‹å‰æ„å¤–åœ°é‡Šæ”¾æ•°æ®ï¼Œå¯¼è‡´**é‡Šæ”¾åä½¿ç”¨ use-after-free**çš„é”™è¯¯ï¼Œæˆ–è€…å®ƒä»¬å¯èƒ½é‡Šæ”¾å®ƒä¸¤æ¬¡ï¼Œå¯¼è‡´**åŒé‡é‡Šæ”¾double free**é”™è¯¯ï¼Œæˆ–è€…å®ƒä»¬å¯èƒ½æ°¸è¿œæ²¡é‡Šæ”¾ï¼Œå¯¼è‡´**æ³„æ¼å†…å­˜leaked memory**é”™è¯¯ã€‚è¿™æ ·çš„é”™è¯¯ä¼šç»™ç¨‹åºå¸¦æ¥ç¾éš¾æ€§çš„åæœï¼Œè€Œè¿™äº›é”™è¯¯é€šå¸¸å¾ˆéš¾è¿½è¸ªã€‚

### ownership æ‰€æœ‰æƒ & è‡ªåŠ¨å†…å­˜ç®¡ç†
Mojoæ²¡æœ‰å¼•ç”¨è®¡æ•°å™¨ï¼Œä¹Ÿæ²¡æœ‰åƒåœ¾æ”¶é›†å™¨ï¼Œè€Œæ˜¯ä½¿ç”¨äº†ç¬¬ä¸‰ç§ç§°ä¸º**æ‰€æœ‰æƒownership**çš„æ–¹æ³•ï¼Œå®ƒä¾èµ–äº**ç¨‹åºå‘˜åœ¨ä¼ é€’å€¼æ—¶å¿…é¡»éµå¾ªä¸€äº›è§„åˆ™**ï¼Œæ ¸å¿ƒè§„åˆ™å°±æ˜¯ **`æ¯ä¸ªå€¼åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…`ï¼Œæ‰€æœ‰è€…åœ¨`ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œ Mojoä¼šé”€æ¯è¯¥å€¼`**ã€‚[è¯¦ç»†çš„è§„åˆ™æŸ¥çœ‹](#mojoçš„-ownership-æ‰€æœ‰æƒè§„åˆ™)
é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒMojoä¼š`è‡ªåŠ¨ä¸ºæ‚¨åˆ†é…å’Œé‡Šæ”¾å †heapå†…å­˜`ï¼Œä½†å®ƒæ˜¯ä»¥ä¸€ç§ç¡®å®šæ€§å’Œå®‰å…¨çš„æ–¹å¼è¿›è¡Œçš„ï¼Œä¸ä¼šå‡ºç°è¯¸å¦‚é‡Šæ”¾åä½¿ç”¨ï¼ŒåŒé‡é‡Šæ”¾å’Œå†…å­˜æ³„æ¼ç­‰é”™è¯¯ã€‚æ­¤å¤–ï¼Œå®ƒä»¥**éå¸¸ä½çš„æ€§èƒ½å¼€é”€**åšåˆ°äº†è¿™ä¸€ç‚¹ã€‚






## Parametric ç¼–è¯‘æ—¶å‚æ•° Fully-bound partially-bound unbound types
Parametricç¼–è¯‘æ—¶å‚æ•° æ”¯æŒéƒ¨åˆ†ç»‘å®špartially boundï¼Œ ä¾‹å¦‚ï¼Œæ·»åŠ äº†ä¸€ä¸ªæ–°çš„ Scalar ç±»å‹åˆ«åï¼Œå®šä¹‰ä¸ºï¼š
```mojo
alias Scalar = SIMD[size=1]
```


# `fn` & `def` å®šä¹‰å‡½æ•°

**å€¼è¯­ä¹‰value semantics**ï¼šå¤åˆ¶ï¼ˆèµ‹å€¼orä¼ å‚ï¼‰ä»¥åï¼Œä¸¤ä¸ªæ•°æ®å¯¹è±¡æ‹¥æœ‰çš„å­˜å‚¨ç©ºé—´æ˜¯**ç›¸äº’ç‹¬ç«‹ã€äº’ä¸å½±å“**ã€‚

**å¼•ç”¨è¯­ä¹‰reference semantics**ï¼šå¤åˆ¶ï¼ˆèµ‹å€¼orä¼ å‚ï¼‰ä»¥åï¼Œä¸¤ä¸ªæ•°æ®å¯¹è±¡**ç›¸äº’ä¹‹é—´äº’ä¸ºåˆ«å**ã€‚æ“ä½œå…¶ä¸­ä»»æ„ä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼Œåˆ™ä¼šå½±å“åˆ°å¦ä¸€ä¸ªã€‚
  - `object` æ˜¯Mojoæä¾›çš„å”¯ä¸€å…·æœ‰`å¼•ç”¨è¯­ä¹‰`çš„ç±»å‹ï¼Œ è€Œä¸”ä½¿ç”¨çš„æ˜¯**Pythonå‚æ•°å¼•ç”¨è¯­ä¹‰**ï¼šå½¢å‚æ•´ä¸ªé‡æ–°èµ‹å€¼ä¸å½±å“å®å‚ï¼Œå±€éƒ¨ä¿®æ”¹å½±å“å®å‚ï¼Œ[ä¸‹é¢æœ‰ä¸“é—¨çš„æè¿°](#pythonå‚æ•°å¼•ç”¨è¯­ä¹‰å½¢å‚æ•´ä¸ªé‡æ–°èµ‹å€¼ä¸å½±å“å®å‚å±€éƒ¨ä¿®æ”¹å½±å“å®å‚)

Mojoä¸å¼ºåˆ¶ä½¿ç”¨**å€¼è¯­ä¹‰**æˆ–**å¼•ç”¨è¯­ä¹‰**ï¼Œã€‚æ¯ä¸ªç±»å‹çš„ä½œè€…è‡ªå·±å†³å®šæ–°å»ºçš„ç±»å‹æ˜¯å€¼è¯­ä¹‰è¿˜æ˜¯å¼•ç”¨è¯­ä¹‰ï¼Œäº¦æˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹ï¼Œç„¶åå†å®ç°ç›¸åº”çš„`åˆ›å»ºcreate`ã€`å¤åˆ¶copy`å’Œ`ç§»åŠ¨move`æ–¹æ³•å³å¯ã€‚

### `Parametricç¼–è¯‘æ—¶å‚æ•° []`ä¸å­˜åœ¨å†…å­˜ç®¡ç†
**Parametricç¼–è¯‘æ—¶å‚æ•°** è¦æ±‚æ”¾åœ¨**æ–¹å¤¸å·é‡Œ`[ ]`**ï¼Œå®ƒçš„å€¼è¦æ±‚æ˜¯**ç¼–è¯‘æ—¶æ˜¯å·²çŸ¥çš„ã€æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œä¸å­˜åœ¨å†…å­˜ç®¡ç†**ã€‚ åç»­æ‰€è¯´å‚æ•°çš„**æ‰€æœ‰æƒã€ä»¥åŠå†…å­˜ç®¡ç†éƒ½æ˜¯é’ˆå¯¹`Argumentè¿è¡Œæ—¶å‚æ•°`**

### `fn` å‚æ•°é»˜è®¤ `ä¸å¯å˜å¼•ç”¨ borrowed `
**Argument è¿è¡Œæ˜¯å‚æ•°** è¦æ±‚æ”¾åœ¨**æ‹¬å·é‡Œ`( )`**ï¼Œå®ƒçš„å€¼è¦æ±‚æ˜¯åœ¨è¿è¡Œæ—¶æ˜¯å·²çŸ¥çš„ï¼Œæ‰€ä»¥ä¹Ÿå«**è¿è¡Œæ—¶å‚æ•°**ã€‚

`fn`å®šä¹‰å‡½æ•°è¦æ±‚æ˜¯**å¼ºç±»å‹**çš„ï¼Œæ— è®ºå‚æ•°ã€å‡½æ•°è¿”å›å€¼è¿˜æ˜¯å‡½æ•°ä½“å†…çš„å˜é‡ï¼Œéƒ½**è¦æ˜ç¡®å£°æ˜çš„ç±»å‹**ï¼Œè€Œä¸”ç¼–è¯‘æ—¶ä¼šè¿›è¡Œæ£€æŸ¥ï¼Œç¡®ä¿`å®å‚`å’Œ`å½¢å‚`çš„ç±»å‹æ˜¯ä¸€è‡´çš„ï¼ŒåŒ…æ‹¬å‡½æ•°çš„è¿”å›å€¼å’Œå£°æ˜çš„ç±»å‹ä¹Ÿæ˜¯ä¸€è‡´çš„ã€‚ 
- **fnçš„å‚æ•°é»˜è®¤æ˜¯`ä¸å¯å˜å¼•ç”¨ borrowed `**ã€‚è¿™æ˜¯ä¸€ä¸ªå†…å­˜ä¼˜åŒ–ï¼Œä»¥é¿å…ä¸å¿…è¦çš„å‰¯æœ¬æ‹·è´ï¼›å› ä¸ºåæ­£æ˜¯ä¸å¯å˜ï¼Œå¦‚æœè¿˜æŒ‰ç…§é»˜è®¤å‚æ•°çš„`å€¼è¯­ä¹‰`ä¼ é€’ï¼Œæ•ˆç‡å·®ã€‚
- `fn`å‡½æ•°ä½“å†…çš„å˜é‡ï¼Œ é€šè¿‡`let` æˆ–è€… `var`æ¥æ ‡æ˜å˜é‡æ˜¯å¦å¯å˜

### `def`å‚æ•°é»˜è®¤ `owned`ã€ç±»å‹æ˜¯`object`
ä»Mojoçš„å†…éƒ¨å®ç°æ¥çœ‹ï¼Œ`def`å…¶å®æ˜¯`fn`çš„è¯­æ³•ç³–ã€‚ `def`å®šä¹‰çš„å‡½æ•°æä¾›äº† **Python styleçš„åŠ¨æ€æ€§** ï¼šæ— è®ºå‚æ•°ã€å‡½æ•°è¿”å›å€¼è¿˜æ˜¯å‡½æ•°ä½“å†…çš„å˜é‡ï¼Œéƒ½**å¯ä»¥ä¸ç”¨æŒ‡å®šç±»å‹**ã€‚ ç”±äºæ²¡ç±»å‹çº¦å®šï¼Œå¦‚æœåœ¨å‡½æ•°å†…ç”¨`å½¢å‚`æ‰§è¡Œäº†æŸäº›æ“ä½œï¼Œè€Œå®é™…ä¼ é€’çš„`å®å‚`å¹¶æ²¡æœ‰å®ç°è¿™äº›æ“ä½œï¼Œ defå‡½æ•°ä¼šæŠ¥é”™ã€‚
- **defçš„å‚æ•°é»˜è®¤` owned `ã€ç±»å‹æ˜¯`object`**
- def å‡½æ•°ä½“å†…çš„ **å˜é‡é»˜è®¤æ˜¯`var` å¯å˜çš„**ã€‚ åœ¨defå‡½æ•°é‡Œï¼Œä¹Ÿå¯ä»¥æ˜ç¡®ç”¨`let`å£°æ˜å˜é‡ï¼Œé‚£å®ƒå°±æ˜¯ä¸å¯å˜çš„ã€‚

- defå®šä¹‰å‡½æ•°**å¯ä»¥ä¸ç”¨æŒ‡å®šç±»å‹**ï¼Œä½†æ˜¯ï¼Œå¦‚æœä¸€æ—¦æŒ‡å®šäº†ç±»å‹ï¼Œå°±è¦ä¸¥æ ¼éµå®ˆï¼Œä¸ç„¶ç¼–è¯‘ä¸è¿‡ï¼Œä¼šæŠ¥é”™ã€‚æ¯”å¦‚ï¼š
  - å¦‚æœå®šä¹‰äº†`String`ä½œä¸ºè¿”å›å€¼ï¼Œ é‚£ä¹ˆå°±ä¸€å®šè¦æœ‰è¿”å›å€¼ï¼Œè€Œä¸”ç±»å‹è¦æ˜¯`String`
  - å¦‚æœæ³¨æ˜å‚æ•°çš„ç±»å‹æ˜¯`Int`, å¦‚æœä¼ ä¸€ä¸ªå°æ•°è¿‡å»ï¼Œæ˜¯ä¸è¡Œçš„ã€‚


#### `def` æ²¡æ³¨æ˜ç±»å‹çš„éƒ½æ˜¯`object`å¯¹è±¡ã€è€Œä¸”æ˜¯`å¼•ç”¨è¯­ä¹‰`
- **å…³é”®å­—`object`ç”¨æ¥è¡¨ç¤ºä¸€ä¸ª`æ²¡æœ‰æ˜ç¡®æ³¨æ˜ç±»å‹çš„å¯¹è±¡`ã€‚ä½¿ç”¨defå®šä¹‰å‡½æ•°ï¼Œå¦‚æœå®ƒçš„`å‚æ•°`ã€`å‡½æ•°ä½“å†…çš„å˜é‡`ã€`ç”šè‡³æ²¡æœ‰å£°æ˜è¿”å›å€¼ç±»å‹`ï¼Œé‚£å®ƒä»¬çš„ç±»å‹éƒ½æ˜¯`object`** å¯¹è±¡ã€‚ 

- ä»»ä½•ç±»å‹çš„å€¼éƒ½å¯ä»¥ä¼ ç»™`object`ï¼Œ è¿™ä¸ªå€¼ä¼šè‡ªåŠ¨æ„å»ºå‡ºä¸€ä¸ª`object`å¯¹è±¡ï¼Œå®ƒå¯ä»¥åŠ¨æ€è¡¨ç¤ºMojoæ ‡å‡†åº“ä¸­çš„ä»»ä½•ç±»å‹ï¼Œ å®é™…çš„ç±»å‹ä¼šåœ¨è¿è¡Œæ—¶å†è‡ªåŠ¨æ¨æ–­ã€‚

- **ä¸ºäº†å’ŒPythonå…¼å®¹ï¼Œ `object`æ˜¯mojoæä¾›çš„å”¯ä¸€ä¸€ä¸ª`å¼•ç”¨è¯­ä¹‰`çš„ç±»å‹(è€Œä¸”ä½¿ç”¨çš„æ˜¯Pythonå‚æ•°ä¼ é€’çš„å¼•ç”¨è¯­ä¹‰ï¼Œç®€ç§°ï¼š`Pythonå‚æ•°å¼•ç”¨è¯­ä¹‰`)ï¼Œå…¶å®ƒç±»å‹éƒ½æ˜¯`å€¼è¯­ä¹‰`**ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨`def`é‡Œæ˜ç¡®å£°æ˜äº†ç±»å‹ï¼Œé‚£å°±ä¸æ˜¯`objectå¯¹è±¡`äº†ï¼Œè€Œæ˜¯æ˜ç¡®å£°æ˜çš„é‚£ä¸ªç±»å‹ï¼Œæ‰€ä»¥æ˜¯`å€¼è¯­ä¹‰`ã€‚ å› æ­¤ï¼Œè¿™ä¸¤ç±»å€¼åœ¨ä¸€èµ·ä½¿ç”¨æ—¶è¦å°å¿ƒï¼Œæ¯•ç«Ÿ`å¼•ç”¨è¯­ä¹‰`å’Œ`å€¼è¯­ä¹‰`åœ¨å¤åˆ¶æ—¶ï¼ˆèµ‹å€¼orä¼ å‚ï¼‰å®ƒä»¬çš„è¡Œä¸ºä¸ä¸€è‡´ã€‚ 
    - **Pythonå‚æ•°å¼•ç”¨è¯­ä¹‰**ï¼šå½¢å‚æ•´ä¸ªé‡æ–°èµ‹å€¼ä¸å½±å“å®å‚ï¼Œå±€éƒ¨ä¿®æ”¹å½±å“å®å‚ï¼Œ[ä¸‹é¢æœ‰ä¸“é—¨çš„æè¿°](#pythonå‚æ•°å¼•ç”¨è¯­ä¹‰å½¢å‚æ•´ä¸ªé‡æ–°èµ‹å€¼ä¸å½±å“å®å‚å±€éƒ¨ä¿®æ”¹å½±å“å®å‚)

ä¾‹å¦‚ï¼šä¸‹é¢defå®šä¹‰çš„å‡½æ•°ï¼Œ 
- **å‚æ•°x** å’Œ **å‡½æ•°ä½“å†…çš„å˜é‡a**ï¼Œ æ²¡æœ‰æ˜ç¡®å£°æ˜ç±»å‹ï¼Œæ‰€ä»¥ç±»å‹éƒ½æ˜¯ `object`å±äº`Pythonå‚æ•°å¼•ç”¨è¯­ä¹‰`ã€‚ 
- **å‚æ•°n** æ˜ç¡®å£°æ˜äº†ç±»å‹ï¼Œæ‰€ä»¥æ˜¯`å€¼è¯­ä¹‰`
- æ²¡æœ‰å£°æ˜è¿”å›å€¼ç±»å‹ï¼Œ æ‰€ä»¥ç³»ç»Ÿä¼šè‡ªåŠ¨æŒ‡æ˜è¿”å›å€¼ç±»å‹æ˜¯`object`ã€‚
```mojo
def f(x, n: Int):   # x æ²¡æœ‰å£°æ˜ç±»å‹ï¼Œæ‰€ä»¥ç±»å‹æ˜¯ `object`
    a = 100         # a æ²¡æœ‰å£°æ˜ç±»å‹ï¼Œæ‰€ä»¥ç±»å‹æ˜¯`object`
    print(x)
    print(n)
    print(a)
```



## `è¿è¡Œæ—¶å‚æ•°argument`é»˜è®¤æ˜¯`å€¼è¯­ä¹‰`
**`è¿è¡Œæ—¶å‚æ•°argument`é»˜è®¤æ˜¯`å€¼è¯­ä¹‰`**ã€‚ å”¯ä¸€ç‰¹æ®Šçš„æ˜¯**defä¸­æ²¡æ³¨æ˜ç±»å‹çš„éƒ½æ˜¯`objectå¯¹è±¡`**, å®ƒå§‹ç»ˆæ˜¯`Pythonå‚æ•°å¼•ç”¨è¯­ä¹‰`ã€‚

ä¾‹å¦‚ï¼Œå³ä½¿Mojo Tensor ç±»å‹æ˜¯åœ¨å †ä¸Šåˆ†é…å€¼ï¼Œä½†defä¸­ç¬¬ä¸€çš„å‚æ•°`t: Tensor[DType.uint8]`æ˜ç¡®å£°æ˜äº†ç±»å‹ï¼Œé‚£å°±ä¸æ˜¯`objectå¯¹è±¡`äº†ï¼Œè€Œæ˜¯æ‰€å£°æ˜çš„ç±»å‹`Tensor[DType.uint8]`, æ˜¯`å€¼è¯­ä¹‰`ã€‚æ‰€ä»¥ï¼Œåœ¨å‡½æ•°ä¸­ä¿®æ”¹å‚æ•°tçš„å€¼ï¼ŒåŸå§‹å€¼ä¸å˜ï¼š
```mojo
def update_tensor(t: Tensor[DType.uint8]):
    t[1] = 3
    print(t)   # Tensor([[1, 3]], dtype=uint8, shape=2)

fn main() raises:
    var t = Tensor[DType.uint8](2) # Tensor æ˜¯åœ¨heapå †ä¸Šåˆ†é…ç©ºé—´
    t[0] = 1
    t[1] = 2
    _ = update_tensor(t)  # å¿½ç•¥è¿”å›å€¼ 
    print(t)    # Tensor([[1, 2]], dtype=uint8, shape=2)
```
> æ³¨æ„ï¼šå¦‚æœä¸Šé¢è¿™æ®µæ˜¯Pythonä»£ç ï¼Œåˆ™å‡½æ•°update_tensorå¯¹å‚æ•°tçš„ä¿®æ”¹ï¼Œå°†ä¼šä¼ åˆ°åˆ°å¤–é¢ï¼Œå› ä¸ºPythonå‚æ•°çš„ä¼ é€’æ˜¯`å¼•ç”¨è¯­ä¹‰`ã€‚


## Pythonå‚æ•°å¼•ç”¨è¯­ä¹‰ï¼š`å½¢å‚æ•´ä¸ªé‡æ–°èµ‹å€¼`ä¸å½±å“å®å‚ï¼Œ`å±€éƒ¨ä¿®æ”¹`å½±å“å®å‚

**Pythonå‚æ•°å¼•ç”¨è¯­ä¹‰**: Pythonè¯­è¨€å¯¹å‚æ•°ä¼ é€’çš„çº¦å®šæ˜¯**é€šè¿‡å¯¹è±¡å¼•ç”¨ä¼ é€’** pass by object referenceï¼Œè¿™æ„å‘³ç€å½“ä½ å°†ä¸€ä¸ªå˜é‡ä¼ é€’ç»™ä¸€ä¸ªPythonå‚æ•°æ˜¯ï¼Œä½ å®é™…ä¸Šæ˜¯**æŠŠå¯¹è±¡çš„å¼•ç”¨`ä½œä¸ºä¸€ä¸ªå€¼`è¿›è¡Œä¼ é€’**ï¼ˆæ‰€ä»¥å®ƒä¸æ˜¯ä¸¥æ ¼çš„å¼•ç”¨è¯­ä¹‰ itâ€™s not strictly reference semantics)

å°†å¯¹è±¡å¼•ç”¨`ä½œä¸ºä¸€ä¸ªå€¼`è¿›è¡Œä¼ é€’æ„å‘³ç€**å½¢å‚æ˜¯å®å‚çš„åˆ«å**ã€‚æ‰€ä»¥åœ¨å‡½æ•°å†…éƒ¨**å½¢å‚`æ•´ä¸ªé‡æ–°èµ‹å€¼`ä¸å½±å“å®å‚ã€`å±€éƒ¨ä¿®æ”¹`å½±å“å®å‚**(ä¾‹å¦‚åœ¨åˆ—è¡¨ä¸Šè°ƒç”¨ `append()` ) ã€‚
- å½¢å‚å±€éƒ¨ä¿®æ”¹ï¼šå½¢å‚å’Œå®å‚æ‰€æŒ‡å‘çš„å†…å­˜åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœå½¢å‚è¿›è¡Œäº†ä¿®æ”¹ï¼Œæ‰€ä»¥ä¼šå½±å“å‡½æ•°å¤–çš„å®å‚ã€‚
- å½¢å‚æ•´ä¸ªé‡æ–°èµ‹å€¼ï¼šé‡æ–°èµ‹å€¼åï¼Œå½¢å‚å°±æŒ‡å‘äº†å¦å¤–çš„å¯¹è±¡ï¼Œå½¢å‚å’Œå®å‚æŒ‡å‘çš„å†…å­˜åœ°å€è‡ªç„¶å°±ä¸åŒäº†ï¼Œæ­¤æ—¶å¯¹å½¢å‚çš„ä¿®æ”¹å°±ä¸ä¼šå½±å“åˆ°å®å‚ã€‚

#### python å½¢å‚æ•´ä¸ªé‡æ–°èµ‹å€¼ï¼Œä¸å½±å“å®å‚
æ³¨æ„ä¸‹é¢æ˜¯ä¸€æ®µpythonä»£ç 
```python
def change_list(l):
    l = [3, 4]            # å½¢å‚æ•´ä¸ªé‡æ–°èµ‹å€¼ï¼Œä¸å½±å“å®å‚
    print("func:", l)     # func: [3, 4]

ar = [1, 2]     
change_list(ar)
print("orig:", ar)        # orig: [1, 2]
```

#### python å½¢å‚å±€éƒ¨ä¿®æ”¹ï¼Œä¼šå½±å“å®å‚
æ³¨æ„ä¸‹é¢æ˜¯ä¸€æ®µpythonä»£ç 
```python
def modify_list(l):
    l.append(3)         # å½¢å‚å±€éƒ¨ä¿®æ”¹ ä¼šå½±å“å®å‚
    print("func:", l)   # func: [1, 2, 3]

ar = [1, 2]
modify_list(ar)
print("orig:", ar)      # orig: [1, 2, 3]
```



# Ownership æ‰€æœ‰æƒ & `æ¯ä¸ªå€¼åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€… owned`
åœ¨æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä»£ç è´¨é‡å’Œæ€§èƒ½åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå‡½æ•°å¦‚ä½•å¤„ç†**å‚æ•°**å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°æ¥æ”¶çš„å€¼æ˜¯å”¯ä¸€å€¼è¿˜æ˜¯å¼•ç”¨ï¼Œæ˜¯å¯å˜çš„è¿˜æ˜¯ä¸å¯å˜çš„ï¼Œéƒ½æœ‰ä¸€ç³»åˆ—çš„åæœï¼Œè¿™äº›åæœå®šä¹‰äº†è¯­è¨€çš„å¯è¯»æ€§ï¼Œæ€§èƒ½å’Œå®‰å…¨æ€§ã€‚

Mojoå¸Œæœ›æä¾›å®Œæ•´çš„`å€¼è¯­ä¹‰`ï¼Œå› ä¸º`å€¼è¯­ä¹‰`æä¾›äº†ä¸€è‡´å’Œå¯é¢„æµ‹çš„è¡Œä¸ºã€‚ä½†æ˜¯ä½œä¸ºä¸€ç§ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œæ¯æ¬¡ä¼ é€’å€¼éƒ½è¿›è¡Œæ‹·è´ï¼Œæˆæœ¬å¤ªé«˜ï¼Œä¸ºäº†æå‡æ•ˆç‡ï¼Œé€šå¸¸éœ€è¦å€ŸåŠ©`å¼•ç”¨è¯­ä¹‰`ã€‚

**Mojoçš„ Ownership æ‰€æœ‰æƒè§„åˆ™**ï¼šç¼–è¯‘å™¨å®ç°äº†ä¸€ä¸ªå€Ÿç”¨æ£€æŸ¥å™¨ï¼Œå¯ä»¥è·Ÿè¸ªæ¯ä¸ªå€¼çš„`ç”Ÿå­˜æœŸ`å¹¶åœ¨æ­£ç¡®çš„æ—¶é—´é”€æ¯æ¯ä¸ªå€¼ï¼ˆå¹¶ä¸”åªé”€æ¯ä¸€æ¬¡ï¼‰ã€‚å¯¹äºæ¯ä¸€ä¸ªå€¼ï¼ŒMojoä¸å¼ºåˆ¶`ç‹¬å è®¿é—®`ã€‚åªæ˜¯å¼ºè°ƒï¼š
1. æ¯ä¸ªå€¼ **`åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…owned`ï¼Œæ‰€æœ‰è€…åœ¨`ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œ Mojoä¼šé”€æ¯è¯¥å€¼`**ã€‚
2. æ¯ä¸ªå€¼`åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨inout`ï¼Œ å¯ä»¥æœ‰`å¤šä¸ªä¸å¯å˜å¼•ç”¨ borrowed`ï¼›
3. `å¯å˜å¼•ç”¨inout` å’Œ `ä¸å¯å˜å¼•ç”¨borrowed` **ä¸èƒ½åŒæ—¶å­˜åœ¨**ã€‚


#### owned æ‰€æœ‰è€… & å¯å˜å¼•ç”¨ å¯ä»¥å…±å­˜å—ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Œ åŒæ—¶éƒ½å…·å¤‡ä¿®æ”¹æƒé™ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
#### owned æ‰€æœ‰è€… å¯ä»¥è¢«å€Ÿç”¨ï¼šä¸å¯å˜å¼•ç”¨borrowedï¼Œ å¯å˜å¼•ç”¨inout`å—ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ


 

### `owned` å’Œ `^` è§¦å‘ `__moveinit__()` æˆ–è€… `__takeinit__()`
**`^`è½¬ç§»æ“ä½œç¬¦** transfer operatorï¼š æ˜¯ä¸€ä¸ªåç¼€æ“ä½œç¬¦ï¼Œ ç”¨åœ¨å˜é‡åç§°åé¢ã€‚**`^`** çš„ä½œç”¨æ˜¯æŠŠå˜é‡çš„æ‰€æœ‰æƒè½¬ç§»ç»™æ¥æ”¶è€…ï¼Œ**æ¥æ”¶è€…è¦æ³¨æ˜æ˜¯`owned`**(è¿™ä¸€ç‚¹å¾ˆé‡è¦)ã€‚æœ‰2ç§æƒ…å†µï¼š
   1. å¦‚æœå®å‚çš„ç±»å‹å®ç°äº†**ç ´å ç§»åŠ¨æ„é€ å‡½æ•°`__moveinit__()`**ï¼Œ**`^`** å°±ä¼šä¼˜å…ˆè§¦å‘è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥æ‰§è¡Œè½¬ç§»æ‰€æœ‰æƒçš„å…·ä½“æ“ä½œï¼ŒåŒæ—¶ä¼šè®©**åŸæ¥çš„å˜é‡ç”Ÿå‘½å‘¨æœŸç»“æŸï¼Œå¤±æ•ˆ**ã€‚
   2. å¦‚æœå®å‚çš„ç±»å‹æ²¡æœ‰å®ç°**ç ´å ç§»åŠ¨æ„é€ å‡½æ•°`__moveinit__()`**ï¼Œè€Œæ˜¯å®ç°äº†**çªƒå– ç§»åŠ¨æ„é€ å‡½æ•°`__takeinit__()`**ï¼Œé‚£ **`^`** å°±ä¼šè§¦å‘è°ƒç”¨`__takeinit__()`æ–¹æ³•æ¥æ‰§è¡Œè½¬ç§»æ‰€æœ‰æƒçš„å…·ä½“æ“ä½œã€‚**åŸæ¥çš„å˜é‡ç»§ç»­ç»´æŒæœ‰æ•ˆ**ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚
   3. **`__moveinit__()`** å’Œ **`__takeinit__()`** stealing moveåŸºæœ¬ä¸€æ ·ï¼Œå®ç°å®ƒä»¬çš„ä»£ç éƒ½æ˜¯**ç›´æ¥è½¬ç§»å€¼çš„æ‰€æœ‰æƒï¼Œæ²¡æœ‰ç”³è¯·åˆ†é…æ–°çš„å †ç©ºé—´**ã€ä¹Ÿæ²¡æ‹·è´æ•°æ®ã€‚ å”¯ä¸€çš„ä¸åŒå°±æ˜¯`__takeinit__()`ä¸ä¼šç»“æŸåŸæ¥å˜é‡çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŸæ¥çš„å˜é‡ä¾ç„¶æœ‰æ•ˆã€‚
   - å¦‚æœå®å‚ç±»å‹æ—¢æ²¡æœ‰å®ç°`ç ´å ç§»åŠ¨æ„é€ å‡½æ•°__moveinit__()`ä¹Ÿæ²¡æœ‰å®ç° `çªƒå– ç§»åŠ¨æ„é€ å‡½æ•° __takeinit__()` ï¼ŒMojoé€šè¿‡ç®€å•çš„æŠŠ`callerâ€™s stackè°ƒç”¨è€…å †æ ˆä¸­å€¼çš„å¼•ç”¨`è½¬ç§»ç»™å¯¹æ–¹ï¼Œæ¥å®ç°æ‰€æœ‰æƒè½¬ç§»ã€‚**ï¼ˆã€‚ã€‚ã€‚ã€‚ã€‚è¿™ä¸€ç‚¹ï¼Œè¿˜æ²¡çœ‹åˆ°å…·ä½“çš„ä¾‹å­ï¼Œè¯´æ³•æœ‰å¾…éªŒè¯ã€‚ã€‚ã€‚ï¼‰**


#### ç ´å ç§»åŠ¨æ„é€ å‡½æ•°`__moveinit__()`ï¼š è½¬ç§»æ‰€æœ‰æƒã€åŸå˜é‡å¤±æ•ˆ

Mojoå¼ºè°ƒ**å€¼è¯­ä¹‰**ï¼Œä¸è¿‡å¤åˆ¶æœ‰æ—¶ä¼šå¯¹æ€§èƒ½é€ æˆé‡å¤§å½±å“ã€‚ æ‰€ä»¥Mojoæä¾› **`__moveinit__()`**ï¼Œå®ƒ**ç›´æ¥è½¬ç§»å€¼çš„æ‰€æœ‰æƒ**ï¼Œæ²¡æœ‰å‘ç”Ÿé‡æ–°åˆ†é…æ–°çš„å †ç©ºé—´ã€ä¹Ÿæ²¡æ‹·è´æ•°æ®ï¼Œæ‰€ä»¥æ•ˆç‡å¾ˆé«˜ã€‚ 

**`^`** ä¼šä¼˜å…ˆè§¦å‘è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥æ‰§è¡Œè½¬ç§»æ‰€æœ‰æƒçš„å…·ä½“æ“ä½œï¼ŒåŒæ—¶ä¼š**è®©åŸæ¥çš„å˜é‡ç”Ÿå‘½å‘¨æœŸç»“æŸ**ã€‚æ‰€ä»¥å«**ç ´åæ€§ç§»åŠ¨**ï¼ŒRustçš„é£æ ¼çš„ç§»åŠ¨ä¹Ÿæ˜¯è¿™ç§æ–¹å¼ã€‚

```mojo
fn __moveinit__(inout self, owned existing: Self):  # å…³é”®ï¼šå½¢å‚è¦æ ‡è®°ä¸º owned
```
`__moveinit__()` çš„å…³é”®æ˜¯existing**å½¢å‚è¦æ ‡è®°ä¸º` owned`**ï¼Œå› ä¸ºå®ƒå°†è·å¾—å®å‚çš„å”¯ä¸€æ‰€æœ‰æƒã€‚

ä¾‹å­ï¼š æ¼”ç¤ºæœ‰æˆ–æ²¡æœ‰ **`^`** è§¦å‘ä¸åŒçš„è°ƒç”¨:
`let b = a ^`  è½¬ç§»æ“ä½œç¬¦ **`^`** è§¦å‘è°ƒç”¨__moveinit__, aç”Ÿå‘½å‘¨æœŸç»“æŸã€‚
`let n = m`  åªæ˜¯æ‹·è´ï¼Œè§¦å‘__copyinit__, m ç»§ç»­æœ‰æ•ˆ
```mojo
from memory.unsafe import Pointer

struct HeapArray:
    var data: Pointer[Int]
    var size: Int

    fn __init__(inout self, size: Int, val: Int):
        self.size = size
        self.data = Pointer[Int].alloc(self.size)
        for i in range(self.size):
            self.data.store(i, val)

    fn __copyinit__(inout self, existing: Self):  #  æ·±åº¦å¤åˆ¶
        print("copy---")
        self.size = existing.size
        self.data = Pointer[Int].alloc(self.size)  # æ‰‹åŠ¨åˆ†é…æ–°çš„å †å†…å­˜ç©ºé—´
        for i in range(self.size):
            self.data.store(i, existing.data.load(i))

    fn __moveinit__(inout self, owned existing: Self):  # existingæ˜¯owned
        print("move")
        # Shallow copy the existing value å¯ä»¥ç†è§£æ˜¯åœ¨è½¬ç§»æ‰€æœ‰æƒ
        self.size = existing.size
        self.data = existing.data
        # Then the lifetime of `existing` ends here, but
        # Mojo does NOT call its destructor

    fn __del__(owned self):
        self.data.free()  # Pointer æ‰‹åŠ¨åˆ†é…çš„å †ç©ºé—´headï¼Œ ä¹Ÿè¦æ‰‹åŠ¨è´Ÿè´£é‡Šæ”¾

    fn dump(self):
        print_no_newline("[")
        for i in range(self.size):
            if i > 0:
                print_no_newline(", ")
            print_no_newline(self.data.load(i))
        print("]")


fn main():
    let a = HeapArray(3, 1)
    let m = HeapArray(3, 2)


    a.dump()  # [1, 1, 1]
    m.dump()  # [2, 2, 2]


    let b = a ^  # è¾“å‡º move; ^è§¦å‘è°ƒç”¨__moveinit__, aç”Ÿå‘½å‘¨æœŸç»“æŸï¼Œåé¢ä¸èƒ½å†è®¿é—® 
    let n = m    # è¾“å‡º copy; åªæ˜¯æ‹·è´ï¼Œè§¦å‘__copyinit__, m ç»§ç»­æœ‰æ•ˆ

    b.dump()  # Prints [1, 1, 1]
    n.dump()  # Prints [2, 2, 2]
    # m.dump()  # Prints [2, 2, 2]  m ç»§ç»­æœ‰æ•ˆ
    # a.dump()  # è¿™å¥ä¼šæŠ¥é”™,  aç”Ÿå‘½å‘¨æœŸç»“æŸ
```

#### çªƒå– ç§»åŠ¨æ„é€ å‡½æ•°`__takeinit__()`: è½¬ç§»æ‰€æœ‰æƒã€åŸå˜é‡ä¾ç„¶æœ‰æ•ˆ
çªƒå–ç§»åŠ¨æ„é€ å‡½æ•°`__takeinit__()` stealing moveå’Œ ç ´åç§»åŠ¨æ„é€ å‡½æ•°`__moveinit__()`åŸºæœ¬ä¸€æ ·ï¼Œéƒ½æ˜¯**ç›´æ¥è½¬ç§»å€¼çš„æ‰€æœ‰æƒ**ï¼Œæ²¡æœ‰å‘ç”Ÿé‡æ–°åˆ†é…æ–°çš„å †ç©ºé—´ã€ä¹Ÿæ²¡æ‹·è´æ•°æ®ã€‚ 

å”¯ä¸€çš„ä¸åŒå°±æ˜¯, å¦‚æœå®å‚çš„ç±»å‹æ²¡æœ‰å®ç°ç ´å ç§»åŠ¨æ„é€ å‡½æ•°`__moveinit__()`ï¼Œ **`^`**æ‰ä¼šè§¦å‘è°ƒç”¨`__takeinit__()`ï¼Œè€Œä¸”**ä¸ä¼šç»“æŸåŸæ¥å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ**ï¼ŒåŸæ¥çš„å˜é‡ä¾ç„¶æœ‰æ•ˆã€‚æ‰€ä»¥å«**çªƒå–ç§»åŠ¨**ï¼Œ C++é£æ ¼çš„ç§»åŠ¨ä¹Ÿæ˜¯è¿™ç§æ–¹å¼ã€‚

### å‚æ•° `borrowed` `inout` `owned`
- **`borrowed ä¸å¯å˜å¼•ç”¨`**: å½¢å‚æ¥æ”¶åˆ°çš„æ˜¯ä¸€ä¸ª`ä¸å¯å˜çš„å¼•ç”¨  immutable reference`ï¼Œè¿™æ„å‘³ç€**å¯ä»¥è¯»å–å€¼ï¼Œä½†ä¸èƒ½ä¿®æ”¹**ã€‚
- **`inout å¯å˜å¼•ç”¨`** ï¼šå½¢å‚æ¥æ”¶åˆ°çš„æ˜¯ä¸€ä¸ª`å¯å˜å¼•ç”¨mutable reference`ï¼Œè¿™æ„å‘³ç€**å¯ä»¥è¯»å–å’Œæ”¹å˜å€¼**ã€‚ åœ¨å‡½æ•°å†…**å¯¹å½¢å‚çš„ä¿®æ”¹ï¼Œæ˜¯ä¼šå½±å“å¤–é¢çš„å®å‚**çš„ã€‚
- **`owned`**ï¼š å½¢å‚æ ‡è®°äº†`owned`ï¼Œå¹¶**ä¸èƒ½ä¿è¯`å½¢å‚`è·å¾—çš„æ˜¯`å¯¹å®å‚çš„å¯å˜å¼•ç”¨`**ï¼Œåªä¿è¯ **å½¢å‚ä¸€å®šä¼šæ‹¥æœ‰å’Œ`å®å‚ä¸€æ ·çš„å€¼`**ï¼Œè€Œä¸”æ˜¯è¿™ä¸ªå€¼çš„å”¯ä¸€æ‰€æœ‰è€…ã€‚ å½¢å‚æœ‰2ç§è·å¾—å®å‚çš„å€¼çš„æ–¹å¼: é€šè¿‡`^`è½¬ç§»æ‰€æœ‰æƒè·å¾—ã€æˆ–è€…é€šè¿‡æ·±åº¦å¤åˆ¶è·å¾—ã€‚
   - **å®å‚ä½¿ç”¨äº†åç¼€`^`** ï¼Œ[æŒ‰ç…§`^`çš„è§„åˆ™](#owned-å’Œ--è§¦å‘-__moveinit__-æˆ–è€…-__takeinit__)ï¼Œ **å®å‚`é€šè¿‡è½¬è®©æ‰€æœ‰æƒ`ï¼Œ`ä¸æ˜¯æ‹·è´`ï¼Œè®©å½¢å‚å®Œå…¨æ‹¥æœ‰äº†åŸæ¥çš„çš„æ•°æ®**ã€‚
    -  **å®å‚æ²¡æœ‰ä½¿ç”¨åç¼€`^`** ä¼ é€’å‚æ•°ç»™`ownedå½¢å‚`ï¼Œè§¦å‘çš„æ˜¯æ·±åº¦å¤åˆ¶`__copyinit__()`ï¼Œè¿™æ˜¯ **`å€¼è¯­ä¹‰`**ï¼Œå°±æ˜¯å•çº¯çš„æŠŠ**å®å‚çš„å€¼æ·±åº¦å¤åˆ¶ä¸€ä»½ç»™å½¢å‚**ï¼Œå¤åˆ¶åçš„å€¼å’ŒåŸæ¥çš„å€¼å½¼æ­¤ç‹¬ç«‹çš„ã€‚ å®å‚æ²¡æœ‰ç»“æŸè‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œ**ä¹Ÿæ²¡æœ‰è½¬è®©æ‰€æœ‰æƒ**ï¼Œå®å‚ç»§ç»­æ˜¯åŸæ¥å€¼çš„å”¯ä¸€æ‰€æœ‰è€…ï¼Œä»ç„¶å¯ä»¥è®¿é—®ï¼›è€Œå½¢å‚æ˜¯å¤åˆ¶åçš„å€¼çš„å”¯ä¸€æ‰€æœ‰è€…ã€‚ è¿™ä¸ªè¿‡ç¨‹ä¼šæ¶‰åŠå¤åˆ¶ã€å †å†…å­˜çš„ç”³è¯·å’Œåˆ†é…ã€‚
       - å½“å€¼ç±»å‹ç”¨ä½œ`ownedå‚æ•°`ï¼Œä¸ºäº†ç¡®ä¿å®å‚åœ¨æ²¡æœ‰ä½¿ç”¨`^` çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ­£å¸¸æŒ‰ç…§å€¼è¯­ä¹‰æ‹·è´ç»™å½¢å‚ï¼Œå€¼ç±»å‹å¿…é¡»ç¡®ä¿æ˜¯å¯æ·±åº¦å¤åˆ¶çš„ï¼ˆé€šè¿‡å®ç° `__copyinit__()`æ¥åšåˆ°ï¼‰ã€‚ 

åœ¨å¤„ç†å¤§çš„æˆ–å¤åˆ¶å¼€é”€å¤§çš„å€¼æ—¶ï¼Œä¼ é€’ä¸€ä¸ª`ä¸å¯å˜å¼•ç”¨`è¦æœ‰æ•ˆå¾—å¤šï¼Œå› ä¸ºå¤åˆ¶æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸ä¼šè¢«è°ƒç”¨ã€‚ä¾‹å¦‚ä¸‹ä¾‹ï¼Œdefçš„å‚æ•°`tensor: Tensor[DType.float32]`ï¼Œæ˜ç¡®å£°æ˜äº†ç±»å‹ï¼Œé‚£å°±æ˜¯`å€¼è¯­ä¹‰`, æ‰€ä»¥è¿™é‡Œåœ¨å‚æ•°å‰ï¼Œæ˜ç¡®åŠ äº†`borrowed`ï¼Œ æŠŠå®ƒå˜æˆ`ä¸å¯å˜å¼•ç”¨`ã€‚
```mojo
from tensor import Tensor, TensorShape

def print_shape(borrowed tensor: Tensor[DType.float32]):  # æ˜ç¡®æŠŠdefçš„å‚æ•°å£°æ˜æˆ`ä¸å¯å˜å¼•ç”¨`
    shape = tensor.shape()
    print(shape.__str__())

fn main() raises:
    let tensor = Tensor[DType.float32](256, 256)
    _ = print_shape(tensor)         # 256x256
```

#### ä¾‹å­ï¼Œå½¢å‚æ˜¯ownedï¼Œ å®å‚åé¢ æ²¡æœ‰oræœ‰ åç¼€` ^`
```mojo
fn take_text(owned text: String):
    text += "!"
    print(text)          # Hello!

fn main():
    let message = "Hello"
    # take_text(message)  # å®å‚æ²¡æœ‰ç”¨åç¼€ ^ï¼Œæ‰€ä»¥å®å‚åªæ˜¯æ·±åº¦æŠŠå€¼å¤åˆ¶ç»™å½¢å‚ï¼Œ å®å‚ç»§ç»­æ˜¯åŸæ¥å€¼çš„å”¯ä¸€æ‰€æœ‰è€…ï¼Œä»ç„¶å¯ä»¥è®¿é—®ã€‚
    take_text(message^) # å®å‚åé¢ç”¨äº† ^ï¼Œå®å‚å…ˆç»“æŸè‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œå†æŠŠæ‰€æœ‰æƒè½¬ç»™å½¢å‚ã€‚å®å‚å·²ç»æ— æ•ˆï¼Œä¸‹é¢printè¯­å¥æŠ¥é”™ã€‚

    print(message)       # Hello
```



### Mojoåœ¨ä¼ é€’å°å€¼æ—¶æ•ˆç‡æ›´é«˜: ç›´æ¥åœ¨`æœºå™¨å¯„å­˜å™¨@register_passable`ä¸­ä¼ é€’
åƒ `Int`ã€`Float` å’Œ `SIMD` è¿™æ ·çš„**å°å€¼ç›´æ¥åœ¨æœºå™¨å¯„å­˜å™¨ä¸­ä¼ é€’**ï¼Œè€Œä¸æ˜¯é€šè¿‡é¢å¤–çš„é—´æ¥ä¼ é€’ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä»¬æ˜¯ç”¨ **`@register_passable`** è£…é¥°å™¨å£°æ˜çš„ã€‚å’ŒC++å’ŒRustç­‰è¯­è¨€ç›¸æ¯”ï¼Œè¿™æ˜¯ä¸€ä¸ªæ˜¾ç€çš„æ€§èƒ½å¢å¼ºã€‚


# `å€¼çš„`ç”Ÿå‘½å‘¨æœŸæ–¹æ³• value lifecycle method

å€¼çš„`ç”Ÿå‘½å‘¨æœŸlifecycle`ç”±ç»“æ„ä½“structä¸­çš„å„ç§åŒä¸‹åˆ’çº¿çš„dunderæ–¹æ³•å®šä¹‰ã€‚ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒäº‹ä»¶ç”±ä¸åŒçš„æ–¹æ³•å¤„ç†ï¼Œä¾‹å¦‚`æ„é€ å‡½æ•°__init__()` ï¼Œ`ææ„å‡½æ•°__del__()`ï¼Œ`å¤åˆ¶æ„é€ å‡½æ•°__copyinit__()` ã€`ç ´å ç§»åŠ¨æ„é€ å‡½æ•°__moveinit__()`å’Œ`çªƒå– ç§»åŠ¨æ„é€ å‡½æ•°__takeinit__()` ã€‚è¿™äº›æ–¹æ³•å®šä¹‰äº†å€¼å¦‚ä½•è¢«åˆ›å»ºå’Œé”€æ¯ã€‚

> æ„é€ å‡½æ•°çš„æ–¹æ³•åé‡Œéƒ½å¸¦æœ‰`init`

å€¼çš„ç”Ÿå‘½å‘¨æœŸä»åˆå§‹åŒ–æ—¶å¼€å§‹ The life of a value begins when it is initializedï¼Œåˆ°é”€æ¯æ—¶ç»“æŸï¼Œé€šå¸¸ï¼ˆä½†ä¸æ€»æ˜¯ï¼‰ä» `__init__()` åˆ° `__del__()` ã€‚Mojoé‡‡ç”¨çš„æ˜¯ **`å°½å¿«ASAP(as soon as possible)`é”€æ¯ç­–ç•¥**ï¼Œå¦‚æœèƒ½å¤Ÿç¡®å®šå€¼åé¢ä¸ä¼šå†ç”¨ï¼ŒMojoå°±ä¼šç«‹å³é©¬ä¸Šé”€æ¯å€¼ï¼Œè€Œä¸ä¼šç­‰åˆ°å‡½æ•°æœ«å°¾ã€‚

### Mojoä¸ä¼šè‡ªåŠ¨æ·»åŠ ä»»ä½•`ç”Ÿå‘½å‘¨æœŸæ–¹æ³•`çš„é»˜è®¤å®ç°ã€‚
Mojoä¸­çš„æ‰€æœ‰æ•°æ®ç±»å‹-åŒ…æ‹¬æ ‡å‡†åº“ä¸­çš„åŸºæœ¬ç±»å‹ï¼ˆå¦‚ Bool ã€ Int å’Œ String ï¼‰ï¼Œä»¥åŠå¤æ‚ç±»å‹ï¼ˆå¦‚ SIMD å’Œ object ï¼‰éƒ½æ˜¯ç”¨`ç»“æ„struct`å®ç°çš„ã€‚è¿™æ„å‘³ç€ä»»ä½•æ•°æ®çš„åˆ›å»ºå’Œé”€æ¯éƒ½éµå¾ªç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸè§„åˆ™ã€‚

å½“æˆ‘ä»¬ç”¨structå®ç°è‡ªå·±çš„ç±»å‹ï¼Œå¦‚æœæ²¡æœ‰æ‰‹åŠ¨å®ç°`æ„é€ å‡½æ•°`ã€`å¤åˆ¶æ„é€ å‡½æ•°`ã€`ç§»åŠ¨æ„é€ å‡½æ•°`å’Œ`ææ„å‡½æ•°`ç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ **Mojoä¸ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬æ·»åŠ ä»»ä½•`ç”Ÿå‘½å‘¨æœŸæ–¹æ³•`çš„é»˜è®¤å®ç°**ã€‚
- ç»“æ„ä½“structå¦‚æœ**æ²¡æœ‰æ‰‹åŠ¨å®ç°æ„é€ å‡½æ•°ï¼Œå°±ä¸èƒ½è¢«å®ä¾‹åŒ–**ï¼Œæ²¡æœ‰å®ä¾‹ï¼Œä¹Ÿå°±æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸã€‚
- **ç»“æ„ä½“çš„å­—æ®µfieldå£°æ˜çš„æ—¶å€™ä¸èƒ½æœ‰é»˜è®¤å€¼**ï¼Œ å­—æ®µå¿…é¡»è¦åœ¨æ„é€ å™¨æ‰èƒ½è¿›è¡Œåˆå§‹åŒ–ï¼ˆèµ‹å€¼ï¼‰ã€‚
  
### æ²¡æœ‰`æ„é€ å‡½æ•°`ï¼Œä¸èƒ½è¢«å®ä¾‹åŒ–
ä¾‹å¦‚ï¼šåˆ›å»ºä¸€ä¸ªæ²¡æœ‰æ„é€ å‡½æ•°çš„ç»“æ„ä½“ï¼Œæ‰€ä»¥ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œ`state`ä¹Ÿæ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œå› ä¸ºç»“æ„ä½“çš„å­—æ®µfieldè¦åœ¨æ„é€ å‡½æ•°é‡Œæ‰èƒ½åˆå§‹åŒ–ã€‚è¿™ä¸ªç»“æ„ä½“å”¯ä¸€çš„ä½œç”¨å°±æ˜¯ä½œä¸º**é™æ€æ–¹æ³•çš„å‘½åç©ºé—´**, åƒè¿™æ ·è°ƒç”¨é™æ€æ–¹æ³• `NoInstances.print_hello()`
```mojo
struct NoInstances:
    var state: Int

    @staticmethod
    fn print_hello():
        print("Hello world!")

fn main():
    NoInstances.print_hello()  # é™æ€æ–¹æ³•çš„å‘½åç©ºé—´ã€‚
```

### æœ‰æ„é€ å‡½æ•° `__init()__`æ‰èƒ½åˆ›å»ºå®ä¾‹
```mojo
 fn __init__(inout self, ... ) :
```
`__init__()`æ„é€ å‡½æ•°ï¼Œåªæœ‰æ‰‹åŠ¨å®ç°äº†ï¼Œæ‰èƒ½åˆ›å»ºå®ä¾‹ï¼Œå®ƒçš„ä¸»è¦èŒè´£æ˜¯åˆå§‹åŒ–æ‰€æœ‰å­—æ®µã€‚
- æ„é€ å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°è¦æ˜¯ `self`ï¼Œè€Œä¸”è¦å£°æ˜ä¸º`inout`ã€‚ æ³¨æ„ï¼š`Self`ï¼ˆå¤§å†™Sï¼‰è¡¨ç¤ºçš„æ˜¯å½“å‰ç±»å‹åç§°çš„åˆ«å
- æ¯ä¸ªæ„é€ å‡½æ•°ç»“æŸæ—¶ï¼Œéƒ½å¿…é¡»å®Œæˆå¯¹**æ‰€æœ‰`ç»“æ„ä½“å­—æ®µ`çš„åˆå§‹åŒ–**ã€‚è¿™æ˜¯ç¡¬æ€§è¦æ±‚ã€‚
- æ„é€ å‡½æ•°å¯ä»¥`é‡è½½overload`, å°±æ˜¯æœ‰ä¸åŒæ•°é‡æˆ–è€…ç±»å‹çš„å‚æ•°ã€‚

ä¾‹å¦‚ï¼ŒMyPetæœ‰æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥å®ä¾‹åŒ–ã€‚ å®ƒçš„å®ä¾‹ä¹Ÿå¯ä»¥è¢«å€Ÿç”¨å’Œé”€æ¯ï¼Œä½†è¿˜ä¸èƒ½è¢«å¤åˆ¶æˆ–ç§»åŠ¨ï¼Œå› ä¸ºè¿˜æ²¡å®ç°`å¤åˆ¶æ„é€ å‡½æ•°__copyinit__()` å’Œ`ç§»åŠ¨æ„é€ å‡½æ•°__moveinit__()`ã€‚
```mojo
struct MyPet:
    var name: String            # å®šä¹‰2ä¸ªç»“æ„ä½“ å­—æ®µ
    var age: Int

    fn __init__(inout self):
        self.name = ""
        self.age = 0

    fn __init__(inout self, name: String):
        self = Self()          # è°ƒç”¨å¦ä¸€ä¸ª æ„é€ å‡½æ•°ã€‚ Selfï¼ˆå¤§å†™Sï¼‰æ˜¯å½“å‰ç±»å‹åç§°çš„åˆ«å
        self.name = name

fn main():
    let mine = MyPet("Loki")    # æœ‰æ„é€ å‡½æ•°, å¯ä»¥åˆ›å»ºå®ä¾‹
```
#### æ‰€æœ‰`ç»“æ„ä½“å­—æ®µ`éƒ½åˆå§‹åŒ–äº†ï¼Œ`self`å¯¹è±¡å°±è§†ä¸ºå®Œæˆäº†åˆå§‹åŒ–
äº‹å®ä¸Šï¼Œåªè¦æ‰€æœ‰**ç»“æ„ä½“çš„å­—æ®µéƒ½åˆå§‹åŒ–**äº†ï¼Œ å³ä½¿åœ¨æ„é€ å‡½æ•°å®Œæˆä¹‹å‰ï¼Œä¹Ÿä¼šå°†**selfå¯¹è±¡è§†ä¸ºå®Œæˆäº†åˆå§‹åŒ–**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ—¶**å¯ä»¥ä¼ é€’`self`è°ƒç”¨å…¶å®ƒå‡½æ•°**äº†ã€‚

ä¾‹å¦‚ï¼Œè¿™ä¸ªæ„é€ å‡½æ•°å¯ä»¥åœ¨æ‰€æœ‰å­—æ®µåˆå§‹åŒ–åç«‹å³ä¼ é€’ `self`è°ƒç”¨å…¶å®ƒå‡½æ•°ã€‚
```mojo
fn use(arg: MyPet):
    pass

struct MyPet:
    var name: String
    var age: Int

    fn __init__(inout self, name: String, age: Int, cond: Bool):
        self.name = name
        if cond:
            self.age = age  # æ‰§è¡Œåˆ°è¿™é‡Œï¼Œæ‰€æœ‰ç»“æ„ä½“çš„å­—æ®µéƒ½åˆå§‹åŒ–äº†
            use(self)   # å¯ä»¥ä¼ é€’ self è°ƒç”¨å…¶å®ƒå‡½æ•°

        self.age = age
        use(self)       # å¯ä»¥ä¼ é€’ self è°ƒç”¨å…¶å®ƒå‡½æ•°

fn main():
    let mine = MyPet("dj", 50, True)
```

### å¤åˆ¶æ„é€ å‡½æ•° `__copyinit__()` & èµ‹å€¼æ“ä½œ `=` 
```mojo
 fn __copyinit__(inout self, existing: Self):   # existing ä½¿ç”¨fnå‚æ•°çš„é»˜è®¤è®¾å®šï¼ˆä¸å¯å˜å¼•ç”¨ï¼‰ï¼Œå› ä¸ºä¸åº”ä¿®æ”¹è¢«å¤åˆ¶çš„å€¼çš„å†…å®¹
```
åªæœ‰å®ç°äº† `å¤åˆ¶æ„é€ å‡½æ•°__copyinit__()`ï¼Œå®ƒçš„å®ä¾‹æ‰æ”¯æŒå¤åˆ¶ã€‚ å¤åˆ¶å…¶å®å°±æ˜¯ä½¿ç”¨å·²ç»å­˜åœ¨çš„å€¼ï¼Œæ„é€ å‡ºå¦ä¸€ä¸ª**å…¨æ–°çš„å¯¹è±¡**ã€‚ æ‰€ä»¥æ‰å«**å¤åˆ¶æ„é€ å‡½æ•°**ã€‚

ä¸»è¦æœ‰2ç§æ–¹å¼è§¦å‘å¤åˆ¶
- èµ‹å€¼æ“ä½œ`=` 
- å®å‚æ²¡æœ‰ä½¿ç”¨åç¼€ **`^`**, ä¼ é€’å‚æ•°ç»™`ownedå½¢å‚`ï¼Œè§¦å‘çš„ä¹Ÿæ˜¯å¤åˆ¶æ“ä½œ



å¦‚æœä¸æƒ³è‡ªå·±çš„ç±»å‹è¢«å¤åˆ¶ï¼Œå°±ä¸è¦å®ç°`__copyinit__()`ã€‚

```mojo
struct MyPet:
    var name: String
    var age: Int

    fn __init__(inout self, name: String, age: Int):
        self.name = name
        self.age = age

    fn __copyinit__(inout self, existing: Self):  # existingä½¿ç”¨é»˜è®¤çš„ä¸å¯å˜å¼•ç”¨è§„åˆ™ï¼Œå› ä¸ºä¸åº”ä¿®æ”¹è¢«å¤åˆ¶çš„å€¼çš„å†…å®¹
        self.name = existing.name
        self.age = existing.age


fn main():
    let mine = MyPet("Loki", 50)
    let second = mine       # å®ç°äº† æ‹·è´æ„é€ å‡½æ•° ï¼Œ å¯ä»¥å¤åˆ¶
```



#### ç¡®ä¿`__copyinit__()`æ‰§è¡Œ`æ·±åº¦å¤åˆ¶` & æ»¡è¶³`å€¼è¯­ä¹‰`
Mojoå¼ºè°ƒ`å€¼è¯­ä¹‰value semantic`ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œèµ‹å€¼æ“ä½œç¬¦`=`æ‰§è¡Œçš„æ˜¯å¤åˆ¶æ“ä½œã€‚ ç„¶è€Œï¼ŒMojoç¼–è¯‘å™¨å¹¶ä¸å¼ºåˆ¶`å¤åˆ¶æ„é€ å‡½æ•°__copyinit__()`æ»¡è¶³**æ·±åº¦å¤åˆ¶Deep Copy**ï¼Œ è€Œæ˜¯äº¤ç”±è‡ªå®šä¹‰structç±»å‹çš„ä½œè€…è‡ªå·±æ¥ä¿è¯è¿™ä¸€ç‚¹ã€‚ ä¹Ÿå°±æ˜¯è¯´ç±»å‹çš„ä½œè€…åœ¨å®ç°`__copyinit__()`çš„æ—¶å€™ï¼Œä¸€å®šè¦ç¡®ä¿æ‰§è¡Œçš„æ˜¯æ·±åº¦å¤åˆ¶ï¼Œè¿™æ ·æ‰èƒ½æ»¡è¶³`å€¼è¯­ä¹‰`ã€‚

```mojo
from memory.unsafe import Pointer

struct HeapArray:
    var data: Pointer[Int]
    var size: Int
    var cap: Int

    fn __init__(inout self, size: Int, val: Int):
        self.size = size
        self.cap = size * 2
        self.data = Pointer[Int].alloc(self.cap)
        for i in range(self.size):
            self.data.store(i, val)

    fn __copyinit__(inout self, existing: Self): # Deep-copy æ·±åº¦å¤åˆ¶ existing çš„å€¼
        self.size = existing.size
        self.cap = existing.cap
        self.data = Pointer[Int].alloc(self.size)   # æ‰‹åŠ¨åˆ†é…ä¸€å—æ–°çš„å†…å­˜ç©ºé—´ heap
        for i in range(self.size):
            self.data.store(i, existing.data.load(i))

    fn __del__(owned self):
        self.data.free()        # Pointer æ‰‹åŠ¨åˆ†é…çš„å †ç©ºé—´headï¼Œ ä¹Ÿè¦æ‰‹åŠ¨è´Ÿè´£é‡Šæ”¾

    fn append(inout self, val: Int):
        if self.size < self.cap:
            self.data.store(self.size, val)
            self.size += 1
        else:
            print("Out of bounds")

    fn dump(self):
        print_no_newline("[")
        for i in range(self.size):
            if i > 0:
                print_no_newline(", ")
            print_no_newline(self.data.load(i))
        print("]")

fn main():
    let a = HeapArray(2, 1)
    var b = a    # è§¦å‘è°ƒç”¨ å¤åˆ¶æ„é€ å‡½æ•°
    a.dump()     # Prints [1, 1]
    b.dump()     # Prints [1, 1]

    b.append(2)  # Changes the copied data
    b.dump()     # Prints [1, 1, 2]
    a.dump()     # Prints [1, 1] (the original did not change)
```

è¯·æ³¨æ„ï¼Œ æœ¬ä¾‹ä¸­`__copyinit__()` ä¸ä¼šå¤åˆ¶ Pointer å€¼ï¼Œè¿™æ ·åšä¼šä½¿å¤åˆ¶åçš„å€¼å’ŒåŸæ¥çš„å€¼å…±äº« dataçš„ å†…å­˜åœ°å€ï¼Œè¿™æ˜¯ä¸€ä¸ªæµ…å¤åˆ¶ã€‚ç›¸åï¼Œæˆ‘ä»¬å…ˆæ‰‹åŠ¨åˆ†é…ä¸€å—æ–°çš„å†…å­˜ç©ºé—´ï¼Œ è®©dataæŒ‡å‘è¿™ä¸ªæ–°çš„å †å†…å­˜å—heapï¼Œç„¶åå†é€ä¸ªæŠŠåŸæ¥çš„å€¼ï¼Œä¸€ä¸ªä¸ªå¤åˆ¶åˆ°æ–°åˆ†é…çš„å †ä¸­ï¼ˆè¿™æ˜¯ä¸€ä¸ªæ·±æ‹·è´ï¼‰ã€‚

å› æ­¤ï¼Œå½“å¤åˆ¶ HeapArray çš„å®ä¾‹åï¼Œæ¯ä¸ªå‰¯æœ¬åœ¨å †ä¸Šéƒ½æœ‰è‡ªå·±çš„å€¼ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªçš„å€¼ï¼Œå¹¶ä¸ä¼šå½±å“å¦ä¸€ä¸ªã€‚

### `@value` è£…é¥°å™¨ å’Œ3ä¸ªæ–¹æ³• `__init__()` ã€ `__copyinit__()`ã€ `__moveinit__()` 
å¦‚æœè‡ªå·±å®šä¹‰çš„ç±»å‹ï¼Œ**æ²¡æœ‰æ‰‹åŠ¨ä½¿ç”¨`Pointer`** åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œè€Œä¸”**æ‰€æœ‰`ç»“æ„ä½“çš„å­—æ®µ`ä½¿ç”¨çš„éƒ½æ˜¯`å¯è‡ªé”€æ¯çš„æ•°æ®ç±»å‹`**ï¼ˆä¾‹å¦‚ Int ã€ Bool ã€ String ç­‰ï¼‰ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨structçš„å®šä¹‰ä¸­æ·»åŠ  **`@value` è£…é¥°å™¨**ï¼Œè®©Mojoå¸®ä½ ç”Ÿæˆ **`__init__()`** ã€ **`__copyinit__()`** å’Œ **`__moveinit__()`** ã€‚ **åŠ©è®°ï¼šä¸€æ£µæœ¨**
- ä¸Šè¿°çš„3ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¦‚æœæœ‰è‡ªå·±çš„å®ç°ï¼Œç¼–è¯‘å™¨å°±ä¼šä½¿ç”¨ä½ è‡ªå·±å®šä¹‰çš„ã€‚åªè¦æ²¡æœ‰è‡ªå·±å®ç°ï¼Œæ‰ä¼šä½¿ç”¨`@value`è£…é¥°å™¨å¸®ä½ ç”Ÿæˆçš„ã€‚


é‡Œé¢ä¸‹é¢2ä¸ªè‡ªå®šä¹‰sturct æ˜¯ç›¸åŒçš„
```mojo
@value
struct MyPet:
    var name: String
    var age: Int

# ä¸Šé¢ä½¿ç”¨äº† @value è£…é¥°å™¨ï¼Œç»“æœå°±åƒä½ å®é™…ä¸Šå†™äº†ä¸‹é¢è¿™ä¸ªï¼š
struct MyPet:
    var name: String
    var age: Int

    fn __init__(inout self, owned name: String, age: Int):
        self.name = name^
        self.age = age

    fn __copyinit__(inout self, existing: Self):
        self.name = existing.name
        self.age = existing.age

    fn __moveinit__(inout self, owned existing: Self):
        self.name = existing.name^
        self.age = existing.age
```

- æ³¨æ„ï¼š è¿™é‡Œæ˜¯è‡ªå·±æ‰‹åŠ¨æ·»åŠ äº†`@value` è£…é¥°å™¨ï¼Œ Mojoæ‰ä¼šå¸®ä½ ç”Ÿæˆäº†è¿™äº›ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è¿èƒŒmojoé»˜è®¤ä¸ä¼šè‡ªåŠ¨å¸®ä½ ç”Ÿæˆä»»ä½•ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ã€‚


 

 

### æ²¡æœ‰ææ„å‡½æ•° ä¹Ÿå¯ä»¥é”€æ¯å¯¹è±¡
åªè¦ç»“æ„ä½“structä¸­çš„æ‰€æœ‰å­—æ®µfieldéƒ½æ˜¯å¯ä»¥è‡ªé”€æ¯çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªç»“æ„ä½“å³ä½¿æ²¡æœ‰å®ç°ææ„å‡½æ•°`__del()__`ï¼Œå®ƒä¹Ÿæ˜¯å¯é”€æ¯çš„ã€‚
- Mojoæ ‡å‡†åº“ä¸­æ‰€æœ‰çš„ç±»å‹ï¼Œé™¤äº†æŒ‡é’ˆ`Pointer`ï¼Œéƒ½æ˜¯å¯ä»¥è‡ªé”€æ¯çš„ã€‚

# æ ‡é‡scalarã€å‘é‡vectorã€çŸ©é˜µmatrixã€å¼ é‡Tensor
**æ·±åº¦å­¦ä¹ **çš„è¡¨ç°ä¹‹æ‰€ä»¥èƒ½å¤Ÿè¶…è¿‡ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ ç®—æ³•ç¦»ä¸å¼€**ç¥ç»ç½‘ç»œ**ï¼Œç„¶è€Œç¥ç»ç½‘ç»œæœ€åŸºæœ¬çš„æ•°æ®ç»“æ„å°±æ˜¯**å‘é‡**å’Œ**çŸ©é˜µ**ï¼Œç¥ç»ç½‘ç»œçš„è¾“å…¥æ˜¯å‘é‡ï¼Œç„¶åé€šè¿‡æ¯ä¸ªçŸ©é˜µå¯¹å‘é‡è¿›è¡Œçº¿æ€§å˜æ¢ï¼Œå†ç»è¿‡**æ¿€æ´»å‡½æ•°**çš„éçº¿æ€§å˜æ¢ï¼Œé€šè¿‡å±‚å±‚è®¡ç®—æœ€ç»ˆä½¿å¾—**æŸå¤±å‡½æ•°çš„æœ€å°åŒ–**ï¼Œå®Œæˆæ¨¡å‹çš„è®­ç»ƒã€‚æ‰€ä»¥è¦æƒ³å­¦å¥½æ·±åº¦å­¦ä¹ ï¼Œå¯¹è¿™äº›åŸºç¡€çš„æ•°æ®ç»“æ„è¿˜æ˜¯è¦éå¸¸äº†è§£ã€‚

- ç‚¹â€”â€”æ ‡é‡ï¼ˆscalarï¼‰ï¼Œ å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ•°(0Då¼ é‡)
- çº¿â€”â€”å‘é‡ï¼ˆvectorï¼‰ï¼Œä¸€ç»´æ•°ç»„(1Då¼ é‡)
- é¢â€”â€”çŸ©é˜µï¼ˆmatrixï¼‰ï¼ŒäºŒç»´æ•°ç»„(2Då¼ é‡)
- ä½“â€”â€”å¼ é‡ï¼ˆtensorï¼‰ï¼Œè¶…è¿‡äºŒç»´çš„æ•°ç»„(å¤šç»´æ•°ç»„)
> dimensionç»´åº¦ï¼Œ ä¹Ÿå«è½´axisã€æˆ–è€…é˜¶rankï¼›è¯´çš„æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚

æ ‡é‡ã€å‘é‡ã€çŸ©é˜µã€å¼ é‡çš„å…³ç³»ï¼šScalar - Vector - Matrix - Tensorå…¶å®å°±æ˜¯æ•°æ®ç»´åº¦é€æ¸ä¸Šå‡çš„è¿‡ç¨‹
![æ ‡é‡ã€å‘é‡ã€çŸ©é˜µã€å¼ é‡çš„å…³ç³»](./res/mojo_scalar_vector.jpg)

### scalaræ ‡é‡ï¼Œ ä¸€ä¸ªæ•°(0Då¼ é‡)
ä¸€ä¸ªæ ‡é‡**å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ•°**ï¼Œå¯ä»¥æ˜¯**æ•°å­—**ã€**å¸ƒå°”å€¼**ã€**å­—ç¬¦**æˆ– **null** ç­‰ã€‚ æ ‡é‡å¼ é‡æœ‰0ä¸ªè½´ï¼ˆ0ç»´ï¼‰æˆ–è€…0é˜¶ã€‚

æ ‡é‡ä¹Ÿå«ï¼šæ ‡é‡å¼ é‡ã€é›¶ç»´å¼ é‡ã€0Då¼ é‡
```python
x = np.array(12)

# å¯ä»¥ç”¨ ndim å±æ€§æ¥æŸ¥çœ‹ä¸€ä¸ª Numpy å¼ é‡çš„è½´çš„ä¸ªæ•°ã€‚æ ‡é‡å¼ é‡æœ‰ 0 ä¸ªè½´ï¼ˆ ndim == 0 ï¼‰
print(x.ndim) 
```
### Vectorï¼ˆå‘é‡ï¼‰ï¼Œä¸€ç»´æ•°ç»„(1Då¼ é‡)
ä¸€ä¸ªå‘é‡è¡¨ç¤ºä¸€ç»„æœ‰åºæ’åˆ—çš„**ä¸€ç»´æ•°ç»„**ï¼Œé€šè¿‡æ¬¡åºä¸­çš„ç´¢å¼•æˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°æ¯ä¸ªå•ç‹¬çš„æ•°ã€‚å‘é‡ä¹Ÿå«ä¸€ç»´å¼ é‡ï¼ˆ1D å¼ é‡ï¼‰ã€‚
```
np.array([12, 3, 6, 14, 7])  # 5Då‘é‡ï¼Œ 2Då¼ é‡
```
è¿™ä¸ªå‘é‡æœ‰ 5 ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥è¢«ç§°ä¸º 5D**å‘é‡**ã€‚ä¸è¦æŠŠ 5Då‘é‡ å’Œ 5D**å¼ é‡** å¼„æ··ï¼ 5Då‘é‡åªæœ‰ä¸€ä¸ªè½´ï¼Œæ²¿ç€è½´æœ‰ 5 ä¸ªç»´åº¦ï¼Œè€Œ 5D å¼ é‡æœ‰ 5 ä¸ªè½´ï¼ˆæ²¿ç€æ¯ä¸ªè½´å¯èƒ½æœ‰ä»»æ„ä¸ªç»´åº¦ï¼‰
### çŸ©é˜µï¼ˆmatrixï¼‰ï¼ŒäºŒç»´æ•°ç»„(2Då¼ é‡)
çŸ©é˜µæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œä¹Ÿå«äºŒç»´å¼ é‡(2D å¼ é‡)ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ç”±ä¸¤ä¸ªç´¢å¼•æ¥å†³å®šã€‚
```python
np.array([[5, 78, 2, 34, 0], [6, 79, 3, 35, 1], [7, 80, 4, 36, 2]])
```

### å¼ é‡ï¼ˆTensorï¼‰ï¼šè¶…è¿‡äºŒç»´çš„æ•°ç»„(å¤šç»´æ•°ç»„)
Tensor = multi-dimensional array of numbers **å¼ é‡æ˜¯ä¸€ä¸ªå¤šç»´æ•°ç»„**ã€‚å¼ é‡çš„dimension**ç»´åº¦ï¼Œ ä¹Ÿå«è½´axisã€æˆ–è€…é˜¶rank**ï¼›è¯´çš„æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚

æ·±åº¦å­¦ä¹ å¤„ç†çš„ä¸€èˆ¬æ˜¯ 0D åˆ° 4D çš„å¼ é‡ï¼Œä½†å¤„ç†è§†é¢‘æ•°æ®æ—¶å¯èƒ½ä¼šé‡åˆ° 5D å¼ é‡ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ª Numpy çš„ 3D å¼ é‡(ç«‹æ–¹ä½“)ã€‚
```python
np.array([[[5, 78, 2, 34, 0],
           [6, 79, 3, 35, 1],
           [7, 80, 4, 36, 2]],

          [[5, 78, 2, 34, 0],
           [6, 79, 3, 35, 1],
           [7, 80, 4, 36, 2]],

          [[5, 78, 2, 34, 0],
           [6, 79, 3, 35, 1],
           [7, 80, 4, 36, 2]]])

```
å¼ é‡çš„ä¸‰ä¸ªå…³é”®å±æ€§ï¼š
- ndimè½´çš„ä¸ªæ•°ï¼šä¾‹å¦‚ï¼Œ3D å¼ é‡æœ‰ 3 ä¸ªè½´ï¼ŒçŸ©é˜µæœ‰ 2 ä¸ªè½´ã€‚
- shapeå½¢çŠ¶: ä¸€ä¸ªæ•´æ•°å…ƒç»„ï¼Œè¡¨ç¤ºå¼ é‡æ²¿æ¯ä¸ªè½´çš„ç»´åº¦å¤§å°ã€‚
- dtype: å¼ é‡çš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚float32ã€int64ç­‰ã€‚

### æ ‡é‡ã€å‘é‡ã€çŸ©é˜µã€å¼ é‡ä¹‹é—´çš„è”ç³»
æ ‡é‡æ˜¯**0ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹**ï¼Œå‘é‡æ˜¯**ä¸€ç»´ç©ºé—´ä¸­çš„ä¸€æ¡çº¿**ï¼ŒçŸ©é˜µæ˜¯**äºŒç»´ç©ºé—´çš„ä¸€ä¸ªé¢**ï¼Œä¸‰ç»´å¼ é‡æ˜¯**ä¸‰ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªä½“**ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‘é‡æ˜¯ç”±æ ‡é‡ç»„æˆçš„ï¼ŒçŸ©é˜µæ˜¯å‘é‡ç»„æˆçš„ï¼Œå¼ é‡æ˜¯çŸ©é˜µç»„æˆçš„ã€‚

ç”¨ä¸€ä¸ªæ¯”è¾ƒé€šä¿—çš„ä¾‹å­å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šå‡è®¾ä½ æ‰‹ä¸­æ‹¿ç€ä¸€æ ¹æ£å­ï¼Œ**æ ‡é‡**å°±æ˜¯æˆ‘ä»¬åªçŸ¥é“æ£å­çš„é•¿åº¦ï¼Œä½†æ˜¯ä¸çŸ¥é“æ£å­æŒ‡å‘çš„æ–¹å‘ã€‚**å‘é‡**å°±æ˜¯æˆ‘ä»¬é™¤äº†çŸ¥é“æ£å­çš„é•¿åº¦ä¹‹å¤–è¿˜çŸ¥é“æ£å­æŒ‡å‘çš„æ˜¯å·¦è¾¹è¿˜æ˜¯å³è¾¹ï¼Œ**çŸ©é˜µ**å°±æ˜¯é™¤äº†çŸ¥é“å‘é‡çŸ¥é“çš„ä¿¡æ¯å¤–è¿˜çŸ¥é“æ£å­æ˜¯æœä¸Šè¿˜æ˜¯æœä¸‹ï¼Œ**å¼ é‡**å°±æ˜¯é™¤äº†çŸ¥é“çŸ©é˜µçŸ¥é“çš„ä¿¡æ¯å¤–è¿˜çŸ¥é“æ£å­æ˜¯æœå‰è¿˜æ˜¯æœåã€‚
 

 # SIMD å•æŒ‡ä»¤æµå¤šæ•°æ®æµ

## `SIMD`ä¸€ä¸ªç”±ç¡¬ä»¶æ”¯æŒçš„å‘é‡
SIMDï¼ˆSingle Instruction, Multiple Dataï¼‰æ˜¯ä¸€ç§å¹¶è¡Œè®¡ç®—æŠ€æœ¯ï¼ŒåŸºæœ¬æ€æƒ³æ˜¯åœ¨å•ä¸€æ“ä½œä¸­åŒæ—¶å¯¹å¤šä¸ªæ•°æ®å…ƒç´ æ‰§è¡Œç›¸åŒçš„æŒ‡ä»¤ã€‚



**`SIMDæ˜¯ä¸€ä¸ªå‘é‡vector`ï¼Œ è€Œä¸”æ˜¯ç”±ç¡¬ä»¶æ”¯æŒçš„å‘é‡ï¼ˆ backed by a hardware vector elementï¼‰**ï¼Œæ³¨æ„ï¼Œ**å®ƒæ˜¯vectorå‘é‡**ï¼Œç°åœ¨çš„CPUå’ŒGPUéƒ½å†…ç½®ä¸“é—¨çš„`SIMDå‘é‡å¯„å­˜å™¨ï¼ˆå±äºç¡¬ä»¶ï¼‰`ï¼Œæ‰€ä»¥SIMDçš„é€Ÿåº¦éå¸¸å¿«ã€‚ **ä¸€ä¸ªSIMDå‘é‡å¯„å­˜å™¨å¯ä»¥å¯ä»¥å­˜å‚¨å¤šä¸ªæ•°æ®å…ƒç´ **ï¼Œ ä¸åŒå‹å·çš„cpuæˆ–gpuï¼Œå®ƒä»¬å†…ç½®çš„simdå‘é‡å¯„å­˜å™¨é•¿åº¦ä¸åŒï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ª 128 ä½çš„ SIMD å¯„å­˜å™¨å¯ä»¥å­˜å‚¨ 4 ä¸ª 32 ä½çš„æµ®ç‚¹æ•°ã€‚ **ä¸€ä¸ªæŒ‡ä»¤å¯ä»¥åŒæ—¶å¯¹åŒä¸€ä¸ªSIMDå†…çš„`å¤šä¸ª`æ•°æ®`è¿›è¡Œæ“ä½œ`** ï¼Œ è€Œä¸æ˜¯é€ä¸ªæ‰§è¡Œã€‚
- **å•ä¸€æŒ‡ä»¤** ï¼šè¿™æ„å‘³ç€åœ¨ç»™å®šçš„æ—¶é’Ÿå‘¨æœŸå†…ï¼Œæ‰§è¡Œçš„æ˜¯åŒä¸€æ¡æŒ‡ä»¤ï¼Œè€Œä¸æ˜¯å¤šæ¡ä¸åŒçš„æŒ‡ä»¤ã€‚
- **å¤šä¸ªæ•°æ®** ï¼šè¿™æ„å‘³ç€ä¸Šè¿°æŒ‡ä»¤å¯ä»¥åŒæ—¶å¯¹åŒä¸€ä¸ªSIMDå¯„å­˜å™¨å†…çš„å¤šä¸ªæ•°æ®è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é€ä¸ªåœ°æ‰§è¡Œã€‚

- **æŒ‡ä»¤é›†æ‰©å±•** ï¼šè®¸å¤šç°ä»£å¤„ç†å™¨æä¾› SIMD æŒ‡ä»¤é›†æ‰©å±•ï¼Œå¦‚ Intel çš„ SSE å’Œ AVXï¼Œä»¥åŠ ARM çš„ NEONã€‚è¿™äº›æ‰©å±•å¢åŠ äº†ä¸“é—¨çš„æŒ‡ä»¤æ¥æ”¯æŒå‘é‡åŒ–çš„æ“ä½œã€‚



### SIMDç¤ºä¾‹
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç®€å•çš„å‘é‡åŠ æ³•æ“ä½œæ¥è§£é‡Š SIMD çš„å·¥ä½œåŸç†ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦å°†ä¸¤ä¸ªæµ®ç‚¹æ•°å‘é‡ç›¸åŠ ã€‚æ¯ä¸ªå‘é‡éƒ½åŒ…å«äº†å››ä¸ªå…ƒç´ ã€‚

**åœºæ™¯ï¼šå‘é‡åŠ æ³•**
å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªæµ®ç‚¹æ•°å‘é‡ A å’Œ Bï¼š
```python
A = [a1, a2, a3, a4]
B = [b1, b2, b3, b4]
```
æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯è®¡ç®—å®ƒä»¬çš„å’Œï¼Œå³ $C=A+B$ã€‚

**1ã€ä¼ ç»Ÿçš„é€å…ƒç´ åŠ æ³•ï¼ˆæ²¡æœ‰ä½¿ç”¨ SIMDï¼‰**
å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæ²¡æœ‰ SIMD æ”¯æŒçš„è€æ—§å¤„ç†å™¨ä¸Šï¼‰ï¼Œæˆ‘ä»¬ä¼šé€ä¸ªå…ƒç´ åœ°è¿›è¡ŒåŠ æ³•æ“ä½œï¼š
```
c1 = a1 + b1
c2 = a2 + b2
c3 = a3 + b3
c4 = a4 + b4
```
**è¿™å››ä¸ªæ“ä½œæ˜¯ä¸²è¡Œçš„**ï¼Œæ„å‘³ç€æ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªåŠ æ³•æ“ä½œã€‚

**2ã€ ä½¿ç”¨ SIMD çš„å‘é‡åŠ æ³•**
ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬çš„å¤„ç†å™¨æ”¯æŒ 4 ä¸ªå…ƒç´ çš„ SIMD åŠ æ³•æ“ä½œã€‚è¿™æ„å‘³ç€å®ƒæœ‰ç‰¹æ®Šçš„å¯„å­˜å™¨ï¼ˆé€šå¸¸ç§°ä¸º**å‘é‡å¯„å­˜å™¨**ï¼‰ï¼Œå¯ä»¥åŒæ—¶å­˜å‚¨å››ä¸ªæµ®ç‚¹æ•°ã€‚

1. **æ•°æ®åŠ è½½**ï¼šé¦–å…ˆï¼Œæˆ‘ä»¬å°†å‘é‡ A å’Œ B çš„å…ƒç´ åŠ è½½åˆ°ä¸¤ä¸ª SIMD å¯„å­˜å™¨ä¸­ã€‚
2. **å•ä¸€æŒ‡ä»¤åŠ æ³•**ï¼šæ¥ç€ï¼Œæˆ‘ä»¬ä½¿ç”¨å•ä¸€çš„ SIMD åŠ æ³•æŒ‡ä»¤ï¼ŒåŒæ—¶å¯¹ä¸¤ä¸ªSIMDå¯„å­˜å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ æ‰§è¡ŒåŠ æ³•æ“ä½œã€‚
3. **æ•°æ®å­˜å‚¨**ï¼šæœ€åï¼Œæˆ‘ä»¬**å°†ç»“æœä» SIMD å‘é‡å¯„å­˜å™¨å­˜å‚¨å›å†…å­˜ä¸­**ï¼Œå¾—åˆ°å‘é‡ Cã€‚

åœ¨è¿™ä¸ª SIMD ç¤ºä¾‹ä¸­ï¼Œå››ä¸ªåŠ æ³•æ“ä½œå‡ ä¹åŒæ—¶å®Œæˆï¼Œè€Œä¸æ˜¯é€ä¸ªè¿›è¡Œï¼Œä»è€Œå¤§å¤§æé«˜äº†æ€§èƒ½ã€‚


## Mojoå†…ç½®SIMDç±»å‹

SIMDç±»å‹æœ‰2ä¸ªå‚æ•°ï¼š
- type(DType): ä¸€ä¸ªSIMDå¯„å­˜å™¨å¯ä»¥å­˜å‚¨å¤šä¸ªæ•°æ®å…ƒç´ ï¼ŒtypeæŒ‡å®šæ•°æ®å…ƒç´ çš„ç±»å‹ã€‚
- size(Int): SIMDå‘é‡çš„**é•¿åº¦**ï¼ˆè¦æ±‚æ˜¯2çš„å¹‚ï¼Œ å¦‚ï¼š1, 2, 4, 8...ï¼‰, ä»£è¡¨**å¯ä»¥å­˜å‚¨ å¤šå°‘ä¸ªç±»å‹æ˜¯typeçš„æ•°æ®å…ƒç´ **ã€‚

**å†…ç½®çš„** `Scalarã€Int8ã€UInt8ã€Int16ã€UInt16...Int64ã€UInt64 ã€Float16ã€ Float32ã€Float64` éƒ½æ˜¯ SIMDå­ç±»å‹çš„ **åˆ«åAliase**ã€‚
- `Scalar = SIMD[?, 1]` è¡¨ç¤ºæ ‡é‡æ•°æ®ç±»å‹ã€‚
- `Int8 = SIMD[si8, 1]` è¡¨ç¤º8ä½æœ‰ç¬¦å·æ ‡é‡æ•´æ•°ã€‚
- `UInt8 = SIMD[ui8, 1]` è¡¨ç¤º8ä½æ— ç¬¦å·æ ‡é‡æ•´æ•°ã€‚
- `Int16 = SIMD[si16, 1]` è¡¨ç¤º 16 ä½æœ‰ç¬¦å·æ ‡é‡æ•´æ•°ã€‚
- `UInt16 = SIMD[ui16, 1]` è¡¨ç¤º16ä½æ— ç¬¦å·æ ‡é‡æ•´æ•°ã€‚
- `Int32 = SIMD[si32, 1]` è¡¨ç¤º 32 ä½æœ‰ç¬¦å·æ ‡é‡æ•´æ•°ã€‚
- `UInt32 = SIMD[ui32, 1]` è¡¨ç¤º32ä½æ— ç¬¦å·æ ‡é‡æ•´æ•°ã€‚
- `Int64 = SIMD[si64, 1]` è¡¨ç¤º 64 ä½æœ‰ç¬¦å·æ ‡é‡æ•´æ•°ã€‚
- `UInt64 = SIMD[ui64, 1]` è¡¨ç¤º64ä½æ— ç¬¦å·æ ‡é‡æ•´æ•°ã€‚
- `Float16 = SIMD[f16, 1]` ä»£è¡¨16ä½æµ®ç‚¹å€¼ã€‚
- `Float32 = SIMD[f32, 1]` è¡¨ç¤º32ä½æµ®ç‚¹å€¼ã€‚
- `Float64 = SIMD[f64, 1]` è¡¨ç¤º64ä½æµ®ç‚¹å€¼ã€‚



# CPU çš„ L1 L2 L3 Cache ç¼“å­˜ & RAM memory å†…å­˜
é€šå¸¸æ¯ä¸ªCPUå†…éƒ¨éƒ½**å†…ç½®**æœ‰ä¸€ä¸ªL1å’ŒL2ç¼“å­˜ï¼ŒL3ç¼“å­˜æ˜¯å¤šä¸ªCPUå…±ç”¨ä¸€ä¸ªã€‚

CPUæŸ¥æ‰¾æ•°æ®çš„æ—¶å€™é¦–å…ˆåœ¨L1ï¼Œç„¶åçœ‹L2ï¼Œå¦‚æœè¿˜æ²¡æœ‰ï¼Œå°±åˆ°L3å’Œå†…å­˜æŸ¥æ‰¾ã€‚ L1ç¼“å­˜çš„è®¿é—®é€Ÿåº¦æœ€å¿«ï¼Œæ‰€ä»¥å¾ˆå¿«éœ€è¦çš„ä¸œè¥¿éƒ½ä¿å­˜åœ¨é‚£é‡Œã€‚ç„¶è€Œï¼Œå®ƒæ˜¯ä»L2ç¼“å­˜å¡«å……çš„ï¼ŒL2ç¼“å­˜æœ¬èº«æ˜¯ä»L3ç¼“å­˜å¡«å……çš„ï¼ŒL3ç¼“å­˜æ˜¯ä»å†…å­˜å¡«å……çš„ã€‚è¿™è®©æˆ‘ä»¬æƒ³åˆ°äº†ä¼˜åŒ–ä»£ç çš„ç¬¬ä¸€ä¸ªæƒ³æ³•ï¼šä½¿ç”¨å·²ç»åœ¨æ›´è¿‘çš„ç¼“å­˜ä¸­çš„ä¸œè¥¿å¯ä»¥å¸®åŠ©ä»£ç è¿è¡Œå¾—æ›´å¿«ï¼Œå› ä¸ºå®ƒä¸å¿…è¢«æŸ¥è¯¢å’Œç§»åŠ¨åˆ°è¿™ä¸ªé“¾ä¸Š

L1/L2/L3 Cache å’Œ memory é€Ÿåº¦å·®åˆ«

- L1 cache: 3 cyclesï¼Œ L1ç¼“å­˜çš„å®¹é‡é€šå¸¸åœ¨32â€”256KBã€‚

- L2 cache: 11 cyclesï¼ŒL2ç¼“å­˜å¤§å°é€šå¸¸åœ¨ 1-32MB

- L3 cache: 25 cyclesï¼Œé«˜ç«¯æ¶ˆè´¹ç±» CPUçš„L3ç¼“å­˜é€šå¸¸32MB-128MB

- RAM Memory: 100 cycles


# Stackï¼ˆæ ˆï¼‰ & Heapï¼ˆå †ï¼‰

# æ¨¡å— module & åŒ… package

**Moduleæ¨¡å—**ï¼šå…¶å®å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„Mojoæºæ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†å…¶å®ƒæ–‡ä»¶åœ¨å¯¼å…¥å®ƒæ—¶å¯ä»¥ä½¿ç”¨çš„ä»£ç ã€‚**æ–‡ä»¶åå°±æ˜¯æ¨¡å—å**(ä¸åŒ…å«.mojoæ‰©å±•å)ï¼Œ**moduleå¯ç‹¬è‡ªå­˜åœ¨**ï¼Œä¸ç”¨å½’å±è«ä¸ªåŒ…packageï¼Œå½“ç„¶ module ä¹Ÿå¯ä»¥å½’å…¥æŸä¸ªåŒ…ä¸‹ã€‚
- æ¨¡å—é€šå¸¸åªæ˜¯åŒ…å«APIï¼Œä»¥ä¾¿è¢«å¯¼å…¥å¹¶åœ¨å…¶ä»–Mojoç¨‹åºä¸­ä½¿ç”¨ã€‚æ‰€ä»¥ä¸€èˆ¬æ¨¡å—çš„ä»£ç æ–‡ä»¶é‡Œä¸å®šä¹‰`main()`å‡½æ•°ã€‚

**åŒ…package**ï¼šå…¶å®æ˜¯ä¸€ä¸ªç›®å½•ï¼Œç›®å½•ä¸‹æ˜¯ä¸€ä¸ªä¸ªå®šä¹‰**moduleæ¨¡å—**çš„.mojoæ–‡ä»¶ï¼Œè¿™ä¸ªç›®å½•ä¸‹æœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ **`__init__.mojo`** ï¼Œå³ä½¿æ˜¯ç©ºæ–‡ä»¶ä¹Ÿä¸€å®šè¦æœ‰ï¼Œç”¨äºæŠŠè¿™ä¸ªç›®å½•è¯†åˆ«ä¸ºä¸€ä¸ªåŒ…ã€‚ æŠŠæ¨¡å—æ–‡ä»¶æ”¾å…¥åŒ…ç›®å½•ï¼Œè¿™ä¸ªæ¨¡å—å°±å±äºè¿™ä¸ªåŒ…ã€‚  é»˜è®¤**ç›®å½•åå°±æ˜¯åŒ…å**
- å¯é€‰åœ°ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨`mojo package`å‘½ä»¤å°†è¯¥åŒ…ç¼–è¯‘æˆä¸€ä¸ªæ›´æ˜“äºå…±äº«çš„`.mojopkg`æˆ–`.ğŸ“¦`æ–‡ä»¶ã€‚å¯ä»¥ä½¿ç”¨`-o`å‚æ•°æŒ‡å®šåŒ…åï¼Œå¯ä»¥ä¸ç›®å½•åä¸åŒã€‚

- **å¯¼å…¥åŒ…**ï¼šå¯ä»¥ç›´æ¥**ä»æºæ–‡ä»¶** æˆ– **ç¼–è¯‘åçš„ .mojopkg** / .ğŸ“¦ æ–‡ä»¶å¯¼å…¥ã€‚è¿™ä¸¤ç§å¯¼å…¥æ–¹å¼å¯¹Mojoæ²¡æœ‰çœŸå®çš„åŒºåˆ«ã€‚
  - å½“ä»æºæ–‡ä»¶å¯¼å…¥æ—¶ï¼Œç›®å½•åç”¨ä½œåŒ…å
  - å½“ä»ç¼–è¯‘çš„åŒ…å¯¼å…¥æ—¶ï¼Œæ–‡ä»¶åæ˜¯åŒ…åï¼ˆä½¿ç”¨ mojo package å‘½ä»¤æŒ‡å®šï¼Œå®ƒå¯ä»¥ä¸ç›®å½•åä¸åŒï¼‰

> **è®¿é—®æ¨¡å—æˆå‘˜çš„å®Œæ•´è·¯å¾„**: å¦‚æœæœ‰åŒ…ï¼Œå°±å…ˆåŒ…åã€ç„¶åæ˜¯æ¨¡å—åã€æœ€åæ‰æ˜¯æ¨¡å—æˆå‘˜çš„åç§°  **åŒ…å.æ¨¡å—å.module_member_name**
> 
## module æ¨¡å—
### å®šä¹‰ä¸€ä¸ªæ¨¡å—
ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå®šä¹‰ç»“æ„ä½“çš„æ¨¡å—ï¼Œæ–‡ä»¶åæ˜¯`mymodule.mojo`ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

æ–‡ä»¶`mymodule.mojo`
```mojo
struct MyPairï¼š
    var first: Int
    var second: Int

    fn __init__(inout self, first: Int, second: Int)ï¼š
        self.first = first
        self.second = second

    fn dump(self)ï¼š
        print(self.first, self.second)
```

### ä½¿ç”¨æ¨¡å—

#### 1ã€ä»æ¨¡å—é‡Œç›´æ¥å¯¼å…¥æ‰€éœ€å†…å®¹ `from æ¨¡å—å import æ‰€éœ€å†…å®¹`
ä»¥ä¸‹æ˜¯å¦‚ä½•åœ¨ä¸mymodule.mojoä½äºåŒä¸€ç›®å½•çš„åä¸ºmain.mojoçš„æ–‡ä»¶ä¸­å¯¼å…¥MyPairï¼š

æ–‡ä»¶`main.mojo`
```mojo
from mymodule import MyPair

fn main()ï¼š
    let mine = MyPair(2, 4)
    mine.dump()
```
åœ¨ç»ˆç«¯å‘½ä»¤è¡Œä¸‹è¿è¡Œï¼š `mojo main.mojo`

#### 2ã€å¯¼å…¥æ•´ä¸ªæ¨¡å— `import æ¨¡å—å`
```mojo
import mymodule
let mine = mymodule.MyPair(2, 4)
```
#### 3ã€ as ä¸ºå¯¼å…¥çš„æˆå‘˜åˆ›å»ºåˆ«å `import æ¨¡å—å as åˆ«å`
```mojo
import mymodule as my
let mine = my.MyPair(2, 4)
```

## package åŒ…
### 1ã€é€šè¿‡ç›®å½•å®šä¹‰ä¸€ä¸ªåŒ…
ä¾‹å¦‚ï¼Œè€ƒè™‘åŒ…å«ä»¥ä¸‹ç›®å½•ç»“æ„çš„é¡¹ç›®ï¼š
<pre>
main.mojo
mypackage/
    __init__.mojo
    mymodule.mojo
</pre>
`__init__.mojo` æ˜¯ç©ºæ–‡ä»¶ï¼Œ ç”¨äºæ ‡è¯†ç›®å½•mypackageæ˜¯ä¸€ä¸ª **åŒ…**

æ–‡ä»¶`mymodule.mojo`ï¼Œå®šä¹‰ä¸€ä¸ªæ¨¡å—
```mojo
struct MyPairï¼š
    var first: Int
    var second: Int

    fn __init__(inout self, first: Int, second: Int)ï¼š
        self.first = first
        self.second = second

    fn dump(self)ï¼š
        print(self.first, self.second)
```

### 2ã€é€šè¿‡åŒ…çš„æºæ–‡ä»¶å¯¼å…¥åŒ…ã€åŒ…åæ˜¯åŒ…çš„ç›®å½•å
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ main.mojo æ–‡ä»¶ç°åœ¨å¯ä»¥**é€šè¿‡åŒ…åå¯¼å…¥** MyPair ï¼Œ è¿™é‡Œçš„å¯¼å…¥æ–¹å¼æ˜¯**é€šè¿‡åŒ…çš„æºæ–‡ä»¶å¯¼å…¥**ï¼Œ æ‰€ä»¥**åŒ…åæ˜¯åŒ…çš„ç›®å½•å**ï¼Œä¸‹å¦‚ä¸‹æ‰€ç¤ºï¼š

æ–‡ä»¶main.mojo
> æ­£å¸¸**è®¿é—®æ¨¡å—æˆå‘˜**çš„å®Œæ•´è·¯å¾„æ˜¯ï¼š **åŒ…å.æ¨¡å—å.module_member_name** å…ˆåŒ…åã€ç„¶åæ˜¯æ¨¡å—åã€æœ€åæ‰æ˜¯æ¨¡å—æˆå‘˜çš„åç§°ã€‚
```python
from mypackage.mymodule import MyPair  

fn main():
    let mine = MyPair(2, 4)
    mine.dump()
```


åœ¨ç»ˆç«¯å‘½ä»¤è¡Œä¸‹è¿è¡Œï¼š `mojo main.mojo`

### 3ã€ä»ç¼–è¯‘åçš„`.mojopkg`å¯¼å…¥åŒ…ã€åŒ…åç”± `mojo package` å‘½ä»¤æŒ‡å®šï¼Œå¯ä»¥ä¸æºä»£ç çš„ç›®å½•åä¸åŒ

#### 3.1 `mojo package` ç¼–è¯‘åŒ…
æŠŠä¸Šé¢çš„åŒ…ï¼ˆä¹Ÿå°±æ˜¯ç›®å½•mypackageï¼‰ç¼–è¯‘æˆ`.mojopkg`ï¼Œ é€šè¿‡ `-o` å‚æ•°æŒ‡å®šäº†ç”Ÿæˆçš„åŒ…åæ˜¯` mypack`
```bash
mojo package mypackage -o mypack.mojopkg  # é€šè¿‡ -o æŒ‡å®šäº†ç”Ÿæˆçš„åŒ…åæ˜¯ mypack
```
æ³¨æ„ï¼šå¦‚æœä½ æƒ³é‡å‘½åŒ…åï¼Œä½ ä¸èƒ½ç®€å•åœ°ç¼–è¾‘ .mojopkg æˆ– .ğŸ“¦ çš„æ–‡ä»¶åï¼Œå› ä¸º**åŒ…çš„åç§°æ˜¯åœ¨.mojopkgæ–‡ä»¶ä¸­ç¼–ç çš„**ã€‚æ‚¨å¿…é¡»å†æ¬¡è¿è¡Œ mojo package ä»¥æŒ‡å®šæ–°åç§°ã€‚

#### 3.2 æŠŠç”Ÿæˆçš„`.mojopkg`åŒ…æ”¾åœ¨main.mojoç›®å½•ä¸‹
<pre>
main.mojo
mypack.mojopkg
</pre>

æ–‡ä»¶main.mojo, å¯¼å…¥åŒ…ï¼Œè°ƒç”¨
```mojo
from mypack.mymodule import MyPair  # å¯¼å…¥åŒ…

fn main():
    let me = MyPair(100, 200)
    me.dump()
```

### `__init__.mojo`é¢„å…ˆå¯¼å…¥æ¨¡å—æˆå‘˜ 
ç›®å‰ï¼Œ.mojo æ–‡ä»¶ä¸­ä¸æ”¯æŒé¡¶çº§ä»£ç (top-level code)ï¼Œå› æ­¤ä¸ Python ä¸åŒï¼Œä½ ä¸èƒ½åœ¨ `__init__.mojo` ä¸­ç¼–å†™åœ¨å¯¼å…¥æ—¶æ‰§è¡Œçš„ä»£ç ã€‚

ä½†æ˜¯ä½ å¯ä»¥åœ¨`__init__.mojo`é‡Œ**é¢„å…ˆå¯¼å…¥æ¨¡å—æˆå‘˜**ï¼Œåç»­ä½¿ç”¨å¯¼å…¥è¿™ä¸ªåŒ…çš„æ—¶å€™ï¼Œå°±å¯ä»¥**çœç•¥æ¨¡å—å**ï¼Œç›´æ¥é€šè¿‡ **`åŒ…å.module_member_name`** æ¥è®¿é—®è¿™äº›é¢„å…ˆå¯¼å…¥çš„æ¨¡å—æˆå‘˜ï¼Œ 

- æ­£å¸¸**è®¿é—®æ¨¡å—æˆå‘˜**çš„å®Œæ•´è·¯å¾„æ˜¯ï¼š **åŒ…å.æ¨¡å—å.module_member_name** å…ˆåŒ…åã€ç„¶åæ˜¯æ¨¡å—åã€æœ€åæ‰æ˜¯æ¨¡å—æˆå‘˜çš„åç§°ã€‚
- è¿™ä¸ªç‰¹æ€§è§£é‡Šäº†ä¸ºä»€ä¹ˆMojoæ ‡å‡†åº“ä¸­çš„ä¸€äº›æˆå‘˜å¯ä»¥ä»å®ƒä»¬çš„åŒ…åå¯¼å…¥

ä¾‹å¦‚è¿˜æ˜¯ä¸Šé¢çš„ mypackageåŒ…ï¼Œ æˆ‘ä»¬åœ¨ `__init__.mojo` ä¸­**é¢„å…ˆå¯¼å…¥æ¨¡å—æˆå‘˜**ï¼š

æ–‡ä»¶`__init__.mojo`
```mojo
from .mymodule import MyPair
```

ç°åœ¨æ–‡ä»¶main.mojoé‡Œå°±å¯ä»¥çœç•¥æ¨¡å—å`mymodule`ï¼Œç›´æ¥é€šè¿‡åŒ…å`mypackage` è®¿é—®è¢«é¢„å…ˆå¯¼å…¥çš„æ¨¡å—æˆå‘˜`MyPair`

```mojo
from mypackage import MyPair

fn main():
    let me = MyPair(100, 200)
    me.dump()
```

# `struct` ç¼–è¯‘æ—¶ç»‘å®šã€ä¸å…è®¸åŠ¨æ€åˆ†æ´¾å’Œè¿è¡Œæ—¶æ›´æ”¹
Mojoçš„ `struct` ç±»ä¼¼äºPythonä¸­çš„ classï¼Œå®ƒä»¬éƒ½æ”¯æŒæ–¹æ³•ï¼Œå­—æ®µï¼Œè¿ç®—ç¬¦é‡è½½ï¼Œå…ƒç¼–ç¨‹çš„è£…é¥°å™¨ç­‰ç­‰ã€‚ç„¶è€Œï¼ŒM**ojoçš„ç»“æ„structæ˜¯å®Œå…¨é™æ€çš„**ï¼Œå®ƒä»¬åœ¨**ç¼–è¯‘æ—¶ç»‘å®š**ï¼Œå› æ­¤å®ƒä»¬**ä¸å…è®¸åŠ¨æ€åˆ†æ´¾**æˆ–**å¯¹ç»“æ„è¿›è¡Œä»»ä½•è¿è¡Œæ—¶æ›´æ”¹**ã€‚


# `trait` & generic æ³›å‹
ç›®å‰ï¼Œ`trait`é‡Œå”¯ä¸€å¯ä»¥å®šä¹‰çš„æ˜¯æ–¹æ³•çš„ç­¾åã€‚æ­¤å¤–ï¼Œæ–¹æ³•è¿˜**ä¸èƒ½æœ‰é»˜è®¤å®ç°**ã€‚

**ä½¿ç”¨`trait`ä½œä¸ºå‡½æ•°çš„å‚æ•°ç±»å‹**ï¼Œ**å¯ä»¥è®©ä½ ç¼–å†™æ³›å‹å‡½æ•°**ï¼Œå®ƒå¯ä»¥æ¥å—ä»»ä½•å®ç°äº†è¯¥traitçš„ç±»å‹ï¼Œè€Œä¸ä»…ä»…æ˜¯æŸä¸ªç‰¹å®šçš„ç±»å‹ã€‚

#### å®šä¹‰`trait`
```mojo
trait Shape:
    fn area(self) -> Float64: ...
```

#### å®ç°`trait`
```mojo
@value
struct Circle(Shape):
    var radius: Float64

    fn area(self) -> Float64:
        return 3.141592653589793 * self.radius ** 2

```

#### ä½¿ç”¨`trait`
ä½¿ç”¨`trait`Shapeæ¥çº¦æŸç¼–è¯‘æ—¶å‚æ•°`T`
```mojo
fn print_area[T: Shape](shape: T):
    print(shape.area())


let circle = Circle(radius=1.5)
print_area(circle)
```

#### trait å¯ä»¥ç»§æ‰¿
```mojo
trait Parent:
    fn parent_func(self): ...

trait Child(Parent):
    fn child_func(self): ...
```

# AnyType

# raises


# Tensor

# Pointer
è¦ä½¿ç”¨æŒ‡é’ˆ `Pointer`, è¦ä»`memory.unsafe`å¯¼å…¥ã€‚
```mojo
from memory.unsafe import Pointer
```


# docstrings API æ–‡æ¡£
API æ–‡æ¡£ `docstrings` å°±æ˜¯åœ¨å‡½æ•°åå­—çš„ä¸‹é¢ï¼Œç”¨**3å¯¹åŒå¼•å·**`""" ... """`æ‹¬èµ·æ¥çš„å†…å®¹ï¼Œä¸€èˆ¬æŒ‰ç…§ä¸‹é¢è¿™æ ·çš„æ ¼å¼ï¼š
```mojo
fn print(x: String):
    """Prints a string.

    Args:
        x: The string to print.
    """
    ...
```

å¯ä»¥ä½¿ç”¨ `mojo doc` å‘½ä»¤ä»è¿™äº›`docstrings`ç”ŸæˆAPIè¯´æ˜æ–‡æ¡£ã€‚

# Python é›†æˆ
å¯ä»¥ç›´æ¥åœ¨Mojoä¸­å¯¼å…¥å’Œè¿è¡ŒPythonä»£ç ï¼ŒMojoåº•å±‚é€šè¿‡ä½¿ç”¨CPythonæ¥ç›´æ¥è¿è¡Œï¼Œå› æ­¤åœ¨Mojoä¸­æ‰§è¡ŒPythonå¹¶ä¸æ¯”ä½¿ç”¨CPythonå¿«ï¼

### 1. ä»pythonåŒ…å¯¼å…¥Mojoçš„`Python`æ¨¡å— 
```mojo
from python import Python
```

### 2. ç”¨`Python.import_module("æ¨¡å—å")`å¯¼å…¥éœ€è¦çš„Pythonåº“ã€‚ 
æ¯”å¦‚ï¼Œè¿™é‡Œå¯¼å…¥numpy
```mojo
let np = Python.import_module("numpy")
```

å®Œæ•´å®ä¾‹å¦‚ä¸‹ï¼š
```mojo
from python import Python

fn use_numpy() raises:
    let np = Python.import_module("numpy")
    let ar = np.arange(15).reshape(3, 5)
    print(ar)
    print(ar.shape)
```
